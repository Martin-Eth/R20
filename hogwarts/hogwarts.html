<div class="sheet-header">
	<div class="sheet-shield"><img src="https://github.com/Martin-Eth/R20/blob/main/hogwarts/graphics/hogwartsSml.png?raw=true"></div>
    <div class="sheet-threecol">
        <span class=sheet-hdrLabel>Name: <input class=sheet-hdrText type=text name=attr_character_name /></span>
        <span class=sheet-hdrLabel>Player: <input class=sheet-hdrText type=text name=attr_player_name /></span>
        <span class=sheet-hdrLabel>Heritage: <input class=sheet-hdrText type=text name=attr_heritage list="heritage"/></span>
    	<span class=sheet-hdrLabel>Complexion: <input class=sheet-hdrText type=text name=attr_complexion list="complexion"/> </span>
       	<span class=sheet-hdrLabel>Hair: <input class=sheet-hdrText type=text name=attr_hair list="hair" /></span>
       	<span class=sheet-hdrLabel>Frame: <input class=sheet-hdrText type=text name=attr_frame list="frame" /> </span>
      	<span class=sheet-hdrLabel>Wand Wood: <input class=sheet-hdrText type=text name=attr_wandWood list="wandWood"/> </span>
       	<span class=sheet-hdrLabel>Wand Core: <input class=sheet-hdrText type=text name=attr_wandCore list="wandCore" /> </span>
       	<span class=sheet-hdrLabel>Wand Look: <input class=sheet-hdrText type=text name=attr_wandLook list="wandLook" /></span>
       	<span class=sheet-hdrLabel>House: <input class=sheet-hdrText type=text name=attr_house list="house"/> </span>
       	<span class=sheet-hdrLabel>Year: <input class=sheet-hdrText type=text name=attr_year list="year" /> </span>
       	<span class=sheet-hdrLabel>Patronus: <input class=sheet-hdrText type=text name=attr_patronus list="patronus" /> </span>
       	<span class=sheet-hdrLabel style="grid-column: 1 / span 3; text-align:center;">&ensp;Ambition: <input class=sheet-hdrText type=text name=attr_ambition style="width: 30em;"/> </span>
    </div>
    <div class="sheet-force-section">
		<input hidden type="radio" value="0" name="attr_crest" class="sheet-crest-checkbox sheet-crest-0" checked>
		<input hidden type="radio" value="1" name="attr_crest" class="sheet-crest-checkbox sheet-crest-1">
		<input hidden type="radio" value="2" name="attr_crest" class="sheet-crest-checkbox sheet-crest-2">
		<input hidden type="radio" value="3" name="attr_crest" class="sheet-crest-checkbox sheet-crest-3">
		<input hidden type="radio" value="4" name="attr_crest" class="sheet-crest-checkbox sheet-crest-4">
		<div class="sheet-shield" ></div>
	</div>
</div>
<div class="sheet-main">
	<div class="sheet-traits" style="text-align:center">
		<div style="grid-column: 1 / span 2; text-align:center;"><h3>Traits</h3></div>
        <div title="Stand in the face or danger; Get what you seek."><button type=action class=sheet-actBtn name=act_Bravery>Bravery</button></div>
        <div><input type=text class=sheet-traitText name=attr_Bravery list="traitvalues"/></div>
        <div title="Hide & sneak; Get what you seek."><button type=action class=sheet-actBtn name=act_Cunning>Cunning</button></div>
        <div><input type=text class=sheet-traitText name=attr_Cunning list="traitvalues"/></div>
        <div title="Gain Knowledge"><button type=action class=sheet-actBtn name=act_Intellect>Intellect</button></div>
        <div><input type=text class=sheet-traitText name=attr_Intellect list="traitvalues"/></div>
        <div title="Help or hinder someone; Approach a magical creature."><button type=action class=sheet-actBtn name=act_Loyalty>Loyalty</button></div>
        <div><input type=text class=sheet-traitText name=attr_Loyalty list="traitvalues"/></div>
        <div title="Cast a spell/duel; Concoct a potion; Use a magical object."><button type=action class=sheet-actBtn name=act_Magic>Magic</button></div>
        <div><input type=text class=sheet-traitText name=attr_Magic list="traitvalues"/></div> 
    </div>
    
	<div class="sheet-friends">
		<div style="grid-column: 1 / span 2; text-align:center;"><h3>Friends & Rivals</h3></div>
        <div class=sheet-hdrLabel>Friend:</div><div><input class=sheet-hdrText type=text name=attr_friend1 /></div>
        <div class=sheet-hdrLabel>Friend:</div><div><input class=sheet-hdrText type=text name=attr_friend2 /></div>
        <div class=sheet-hdrLabel>Rival:</div><div><input class=sheet-hdrText type=text name=attr_rival /></div>
        <div style="grid-column: 1 / span 2; font-size:8px;">When someone is your Friend or Rival you may add +1 to a roll to help or hinder them.</div>
        <div class=sheet-hdrLabel>Pet:</div><div> <input class=sheet-hdrText type=text name=attr_pet list="pet"/></div>
        <div style="grid-column: 1 / span 2; font-size:8px;">When you spend time with your pet, you can shift one marked Condition to another one.</div>
    </div>    
    
	<div class="sheet-conditions">
		<div style="grid-column: 1 / span 2; text-align:center;"><h3>Conditions</h3></div>
        <div class="sheet-cn" title="-2 to bravery until you avoid something difficult">
        	<input name=attr_scared value="-2" class="sheet-xp" type="checkbox"><span class="sheet-xpTracker" ></span> Scared
        </div>
        <div class="sheet-cn" title="-1 to all traits until healed with medicine or magic">
        	<input name=attr_injured value="-1" class="sheet-xp" type="checkbox"><span class="sheet-xpTracker" ></span> Injured
        </div>
        <div class="sheet-cn" title="-2 to cunning until you hurt someone or break something">
        	<input name=attr_angry value="-2" class="sheet-xp" type="checkbox"><span class="sheet-xpTracker" ></span> Angry
        </div>
        <div class="sheet-cn" title="-1 to 1 trait of the Narrators Choice until cured">
        	<input name=attr_hexed value="-1" class="sheet-xp" type="checkbox" /><span class="sheet-xpTracker" ></span> Hexed
        	<input class=sheet-smllist type=text class=sheet-condition name=attr_hexed_max list="traits" />
        </div>
        <div class="sheet-cn" title="-2 to intellect until you say something hurtful to someone">
        	<input name=attr_stressed value="-2" class="sheet-xp" type="checkbox"><span class="sheet-xpTracker" ></span> Stressed
        </div>
        <div class="sheet-cn" title="Unable to act until revived, can be avoided by taking a different condition">
        	<input name=attr_unconscious value="-1" class="sheet-xp" type="checkbox"><span class="sheet-xpTracker" ></span> Unconscious
        </div>
        <div class="sheet-cn" title="-2 to loyalty until you betray a friend">
        	<input name=attr_jealous value="-2" class="sheet-xp" type="checkbox"><span class="sheet-xpTracker" ></span> Jealous
        </div>
        <div></div>
        <div class="sheet-cn" title="-2 to magic until you take a comment the wrong way">
        	<input name=attr_embarrassed value="-2" class="sheet-xp" type="checkbox"><span class="sheet-xpTracker" ></span> Embarrassed
        </div>
        <div></div>
    </div>   

	<div style="break-inside: avoid;">   
	<div class="sheet-subjects">
		<div style="grid-column: 1 / span 2; text-align:center;"><h3>Classes</h3></div>
        <div class=sheet-hdrLabel>Favourite Class:</div><div><input class=sheet-hdrText type=text name=attr_favourite list="subjects" style="width: 14em; font-size:10px;"/></div>
		<div style="text-align:center"><h3>Core</h3></div>

		<div style="text-align:center"><h3>Elective</h3></div>
        <div style="font-size:8px;">Charms<br />Defence Against the Dark Arts<br />Herbology<br />History of Magic<br />Potions<br />Transfiguration</div>
        <div style="font-size:8px;">Arithmancy<br />Astronomy<br />Care of Magical Creatures<br />Divination<br />Muggle Studies<br />Quidditch</div>
	</div>    

	<div class="sheet-globalMods">
		<div style="grid-column: 1 / span 2; text-align:center;"><h3>Global Modifiers</h3></div>
        <div style="grid-column: 1 / span 2; font-size:10px; text-align:center;">
			<input type=text class=sheet-traitText name=attr_globalMod title="This will affect to all rolls"/> This will affect to all rolls.<br />
			<input name="attr_favSubj" class="sheet-xp" type="checkbox" value="1"><span class="sheet-xpTracker" ></span> +1 if favourite subject applies.
        </div>
    </div>
	</div>
	         
	<div class="sheet-luckyExp">
		<div style="text-align:center" title="When you want to do something you normally couldn't, or change a roll to a 10+, you may mark a point of luck. You regain all your marked luck when you complete a school year."><h3>Luck</h3></div>
		<div style="text-align:center" title="When you fail a roll, mark 1 point of experience. When you get to 4 experience, you may then take an Advancement! Then clear your marked Experience."><h3>Experience</h3></div>
        <div style="text-align:center;">
            <input name="attr_lck0" class="sheet-lck" value=1 type="checkbox"><span class="sheet-lckclr" ></span>
            <input name="attr_lck1" class="sheet-lck" value=1 type="checkbox" checked="checked"><span class="sheet-lckTracker" ></span>
            <input name="attr_lck2" class="sheet-lck" value=1 type="checkbox" checked="checked"><span class="sheet-lckTracker" ></span>
            <input name="attr_lck3" class="sheet-lck" value=1 type="checkbox" checked="checked"><span class="sheet-lckTracker" ></span>

<!--            <input name="attr_lck1" class="sheet-lck" type="checkbox" checked="checked"><span class="sheet-lckTracker" ></span>
            <input name="attr_lck2" class="sheet-lck" type="checkbox" checked="checked"><span class="sheet-lckTracker" ></span>
            <input name="attr_lck3" class="sheet-lck" type="checkbox" checked="checked"><span class="sheet-lckTracker" ></span>
-->
        </div>
        <div style="text-align:center;">
            <input name="attr_xp0" class="sheet-xp" value=1 type="checkbox"><span class="sheet-xpclr" ></span>
            <input name="attr_xp1" class="sheet-xp" value=1 type="checkbox"><span class="sheet-xpTracker" ></span>
            <input name="attr_xp2" class="sheet-xp" value=1 type="checkbox"><span class="sheet-xpTracker" ></span>
            <input name="attr_xp3" class="sheet-xp" value=1 type="checkbox"><span class="sheet-xpTracker" ></span>
            <input name="attr_xp4" class="sheet-xp" value=1 type="checkbox"><span class="sheet-xpTracker" ></span>

<!--			<input name="attr_is_xp1" class="sheet-xp" type="checkbox"><span class="sheet-xpTracker" ></span>
            <input name="attr_is_xp2" class="sheet-xp" type="checkbox"><span class="sheet-xpTracker" ></span>
            <input name="attr_is_xp3" class="sheet-xp" type="checkbox"><span class="sheet-xpTracker" ></span>
            <input name="attr_is_xp4" class="sheet-xp" type="checkbox"><span class="sheet-xpTracker" ></span>
-->
        </div>
    </div>
    
	<div class="sheet-advancement">
		<div style="grid-column: 1 / span 2; text-align:center;" title="When you've marked 4 experience or when you complete a school year, take one of the following advancements."><h3>Advancement</h3></div>
        <div style="grid-column: 1 / span 2; font-size:8px;">When you’ve marked 4 Experience or when you complete a school year, take one of the following Advancements:</div>
        <div>
			<input name=attr_plusTrait class="sheet-xp" type="checkbox"><span class="sheet-xpTracker" ></span><span></span>
    	    <input name=attr_plusTrait_max class="sheet-xp" type="checkbox"><span class="sheet-xpTracker" ></span><span></span>
        </div>
        <div style="font-size:10px; font-weight:bold;" title="You may do this twice. No trait can ever be more than +3">Upgrade a trait by +1.</div>
        <div>
			<input name=attr_fav value=1 class="sheet-xp" type="checkbox"><span class="sheet-xpTracker" ></span>
        </div>
        <span>
        	<div style="font-size:10px; font-weight: bold;" title="You may do this only once">Gain a second Favourite Subject.</div>
        	<div></div><div><input class=sheet-hdrText type=text name=attr_fav_max style="width: 14em; font-size:10px;" list="subjects"/></div>
        </span>
        <div style="grid-column: 1 / span 2; font-size:10px; font-weight: bold;" title="You may do this as many times as you’d like.">Learn a new Spell.</div>
        <div style="grid-column: 1 / span 2; font-size:10px; font-weight: bold;" title="You may do this as many times as you’d like.">Aquire a magical object.</div>
        <div style="grid-column: 1 / span 2; font-size:10px; font-weight: bold;" title="You may do this as many times as you’d like.">Regain 1 marked point of Luck.</div>
    </div>    

	<div class="sheet-globalMods">
		<div style="grid-column: 1 / span 2; text-align:center;" title="Add any scars you have or pick up."><h3>Scars</h3></div>
        <div style="grid-column: 1 / span 2; font-size:10px; text-align:center;">
		<fieldset class="repeating_scars">
			<input class=sheet-scarText type=text name=attr_scarn style="width=:25px"/>
		</fieldset>
        </div>
    </div>

</div>
<div class="sheet-moves">
	<h3 style="grid-column: 1 / span 3; text-align:center;">Basic Moves</h3>
    <h3 style="text-align:center;">Magical Objects</h3>
    
	<div class="sheet-bm1">  <!-- Move Stand in the Face of Danger -->
   		<div>
        	<button type=action class=sheet-moveBtn name=act_stand title="When you stand in the Face of Danger">Stand in the Face of Danger</button>
        	<input name="attr_is_hide1" class="sheet-moves1" type="checkbox" checked="checked">
			<span class="sheet-is-hide1" >
				<span></span>
			</span>
            <div class="sheet-hide1">
                <div>When you stand in the face of danger, physical or otherwise, roll <strong>+Bravery</strong>.</div>
                <div><span style="font-weight: bold;">On a 10+</span>, pick one</div>
                <ul>
					<li>You stand firm and nobody gets hurt</li>
					<li>You aren’t hurt, and you hurt the threat right back</li>
				</ul>
                <div><span style="font-weight: bold;">On a 7-9</span>, pick one</div>
                <ul>
					<li>You hurt the threat, but it hurts you as well</li>
					<li>You aren’t able to act, but the threat backs off</li>
                    <li>You flee, but you don’t suffer any Serious Consequences</li>
                    <li>You avoid Serious Consequences, but someone else suffers them instead</li>
				</ul>
                <div><span style="font-weight: bold;">On a 6-</span>, mark a point of Experience. You aren’t able to face the danger, and the Narrator may tell you a Serious Consequence that happens as a result.</div>
            </div>
        </div>
	</div>
	<div class="sheet-bm2"> <!-- Move Hide and Sneak -->
   		<div>
        	<button type=action class=sheet-moveBtn name=act_hide title="When you hide yourself or something else">Hide and Sneak</button>
        	<input name="attr_is_hide2" class="sheet-moves2" type="checkbox" checked="checked">
			<span class="sheet-is-hide2" >
				<span></span>
			</span>
            <div class="sheet-hide2">
                <div>When you hide yourself or something else, try to move around unnoticed, or otherwise hide & sneak about, roll <strong>+Cunning</strong>.</div>
                <div><span style="font-weight: bold;">On a 10+</span>, you or whatever you’re hiding aren’t detected.</div>
                <div><span style="font-weight: bold;">On a 7-9</span>, pick one</div>
                <ul>
					<li>Someone or something is looking for you or what you’ve hidden</li>
					<li>Someone or something knows you’re here or that you’ve hidden something, but not where</li>
                    <li>You leave some kind of trace or evidence behind</li>
				</ul>
                <div><span style="font-weight: bold;">On a 6-</span>, mark a point of Experience. You or whatever you’re hiding are found, and the Narrator may tell you a Serious Consequence that happens as a result.</div>
            </div>
        </div>
	</div>
	<div class="sheet-bm3"> <!-- Move Help or Hinder Someone-->
   		<div>
        	<button type=action class=sheet-moveBtn name=act_help title="When you Assist or Interfere with someone">Help or Hinder Someone</button>
        	<input name="attr_is_hide3" class="sheet-moves3" type="checkbox" checked="checked">
			<span class="sheet-is-hide3" >
				<span></span>
			</span>
            <div class="sheet-hide3">
                <div>When you assist, defend, or otherwise help someone, or when you trip up, interfere with, or otherwise hinder someone, roll <strong>+Loyalty</strong>. If the person is a Friend or a Rival, you may add +1 to your roll.</div>
                <div><span style="font-weight: bold;">On a 10+</span>, pick one</div>
                <ul>
					<li>Give them +/-1 to their roll</li>
					<li>Prevent them from taking a Condition</li>
                    <li>Offer them 1 Experience to stop what they’re doing</li>
				</ul>
                <div><span style="font-weight: bold;">On a 7-9</span>, pick one of the above options, but take a Condition as a result of your efforts.</div>
                <div><span style="font-weight: bold;">On a 6-</span>, mark a point of Experience. You aren’t able to help or hinder them, and the Narrator may tell you a Serious Consequence that happens as a result.</div>
            </div>
        </div>
    </div>
	<div class="sheet-bm4"> <!-- Move Gain Knowledge -->
   		<div>
        	<button type=action class=sheet-moveBtn name=act_knowl title="When you want to gain knowledge">Gain Knowledge</button>
        	<input name="attr_is_hide4" class="sheet-moves4" type="checkbox" checked="checked">
			<span class="sheet-is-hide4" >
				<span></span>
			</span>
            <div class="sheet-hide4">
                <div>When you want to gain knowledge<br />... about a person, object, situation, or place,<br /> ... from a conversation, book, newspaper, or other document,<br />... or from your own memory, roll <strong>+Intellect</strong>.</div>
                <div><span style="font-weight: bold;">On a 10+</span>, you gain the knowledge you wanted. You may ask the Narrator a question and they must give a true answer. You might ask:</div>
                <ul>
					<li>What here isn’t what it seems to be?</li>
					<li>Where is the thing I’m looking for?</li>
                    <li>What’s the history of this?</li>
					<li>How do I make this useful?</li>
					<li>Are they telling the truth?</li>
                    <li>What do they really want?</li>
					<li>What do I remember about this?</li>
				</ul>
                <div><span style="font-weight: bold;">On a 7-9</span>,you get some of the knowledge you wanted. You may ask the Narrator a question. They must give you a true answer, but they don’t have to give you a full answer.</div>
                <div><span style="font-weight: bold;">On a 6-</span>, mark a point of Experience. You’re not sure if you got the knowledge you wanted. You may ask the Narrator a question, but they don’t have to give you a full answer, or a true one. The Narrator may also tell you a Serious Consequence that happens as a result.</div> 
            </div>           
		</div>
	</div>
	<div class="sheet-bm5"> <!-- Move Get what you Seek -->
   		<div>
        	<button type=action class=sheet-moveBtn name=act_getstuff title="When you want something">Get what you Seek</button>
        	<input name="attr_is_hide5" class="sheet-moves5" type="checkbox" checked="checked">
			<span class="sheet-is-hide5" >
				<span></span>
			</span>
            <div class="sheet-hide5">
                <div>When you want to get an object or persuade someone to do or think something and you get what you seek with<br />…honesty, negotiation, charisma, or humility, roll <strong>+Bravery</strong>.<br />…trickery, cheating, underhandedness, or theft, roll <strong>+Cunning</strong>.</div>
                <div><span style="font-weight: bold;">On a 10+</span>, you get what you wanted, no problem.</div>
                <div><span style="font-weight: bold;">On a 7-9</span>, pick one</div>
                <ul>
					<li>The person you got it from is suspicious</li>
					<li>You must give or promise something in return</li>
                    <li>The person you got it from changes their attitude towards you.</li>
				</ul>
                <div><span style="font-weight: bold;">On a 6-</span>, mark a point of Experience. You don’t get what you wanted, and the Narrator may tell you a Serious Consequence that happens as a result.</div>
            </div>
        </div>              
	</div>
	<div class="sheet-bm6"> <!-- Move Exit Story -->
   		<div>
        	<button type=action class=sheet-moveBtn name=act_exit title="When all 8 Conditions are marked">Exit Story</button>
        	<input name="attr_is_hide6" class="sheet-moves6" type="checkbox" checked="checked">
			<span class="sheet-is-hide6" >
				<span></span>
			</span>
            <div class="sheet-hide6">
                <div>When all 8 Conditions are marked, roll <strong>+your highest trait</strong> to see if you exit the story.</div>
                <div><span style="font-weight: bold;">On a 10+</span>, you come back with all Conditions cleared.</div>
                <div><span style="font-weight: bold;">On a 7-9</span>, you come back with only Unconscious cleared.</div>
                <div><span style="font-weight: bold;">On a 6-</span>, you exit the story. Create a new witch/wizard.</div>
            </div>
        </div>
	</div>
    
	<h3 style="grid-column: 1 / span 3; text-align:center;">Magic Moves</h3>
    <div class="sheet-mm1">  <!-- Move Cast a Spell -->
   		<div>
        	<button type=action class=sheet-moveBtn name=act_cast title="When you cast a spell">Cast a Spell</button>
        	<input name="attr_is_hidem1" class="sheet-movem1" type="checkbox" checked="checked">
			<span class="sheet-is-hidem1" >
				<span></span>
			</span>
            <div class="sheet-hidem1">
                <div>When you cast a spell you know, first say the incantation and wave a wand, then roll <strong>+Magic</strong>. If you don’t know the spell, don’t say the incantation, or don’t wave a wand, you must mark a point of Luck, then roll <strong>+Magic</strong>.<br /> You don’t need to roll to cast a spell if there’s no chance it would fail. In general, you can always cast a spell two or more years below your current year, unless you’re casting it in a stressful situation.</div>
                <div><span style="font-weight: bold;">On a 10+</span>, you successfully cast the spell the way you wanted.</div>
                <div><span style="font-weight: bold;">On a 7-9</span>, you successfully cast the spell, but (pick one)...</div>
                <ul>
					<li>The effect isn’t as powerful as it should be</li>
					<li>The effect doesn’t last as long as it should</li>
                    <li>You attract unwanted attention</li>
				</ul>
                <div><span style="font-weight: bold;">On a 6-</span>, mark a point of Experience. You fail to cast the spell, and the Narrator may tell you a Serious Consequence that happens as a result.</div>
            </div>
        </div>
	</div>
    <div class="sheet-mm2">  <!-- Move Use a Magical Object -->
   		<div>
        	<button type=action class=sheet-moveBtn name=act_useObj title="Use a Magical Object">Use a Magical Object</button>
        	<input name="attr_is_hidem2" class="sheet-movem2" type="checkbox" checked="checked">
			<span class="sheet-is-hidem2" >
				<span></span>
			</span>
            <div class="sheet-hidem2">
                <div>When you use a magical object, roll <strong>+Magic</strong>.</div>
                <div><span style="font-weight: bold;">On a 10+</span>, the object works exactly as expected and you make full use of it.</div>
                <div><span style="font-weight: bold;">On a 7-9</span>,pick one:</div>
                <ul>
					<li>The object does something unexpected but helpful</li>
					<li>The object’s effect isn’t as powerful as it should be</li>
                    <li>The object works as expected, but you take a Condition from using it</li>
                    <li>The object works, but it breaks in the process</li>
				</ul>
                <div><span style="font-weight: bold;">On a 6-</span>, mark a point of Experience. The magical object doesn’t work correctly, and the Narrator may tell you a Serious Consequence that happens as a result.</div>
            </div>
        </div>
	</div>
    <div class="sheet-mm3">  <!-- Move Duel -->
   		<div>
        	<button type=action class=sheet-moveBtn name=act_duel title="When you get into a wizard's duel">Duel</button>
        	<input name="attr_is_hidem3" class="sheet-movem3" type="checkbox" checked="checked">
			<span class="sheet-is-hidem3" >
				<span></span>
			</span>
            <div class="sheet-hidem3">
                <div>When you get into a wizard’s duel, roll <strong>+Magic</strong> to cast a spell, but use these options:</div>
                <div><span style="font-weight: bold;">On a 10+</span>, your spell hits the other witch/wizard, and their spell misses!</div>
                <div><span style="font-weight: bold;">On a 7-9</span> ,pick one:</div>
                <ul>
					<li>Your spells collide in midair!</li>
					<li>Your spell misses, but so does theirs!</li>
                    <li>Both spells hit!</li>
				</ul>
                <div><span style="font-weight: bold;">On a 6-</span>, mark a point of Experience. Your spell misses, and their spell hits! The Narrator tells you a Serious Consequence that happens to you as a result.</div>
                <div>&emsp;If you’re casting a defensive or healing spell, treat a “hit” as a block or a success. The duel ends when a witch/wizard yields or when they can't cast spells anymore.</div>
            </div>
        </div>
	</div>
    <div class="sheet-mm4">  <!-- Move Concoct a potion -->
   		<div>
        	<button type=action class=sheet-moveBtn name=act_concoct title="When you mix, brew, or otherwise concoct a potion">Concoct a Potion</button>
        	<input name="attr_is_hidem4" class="sheet-movem4" type="checkbox" checked="checked">
			<span class="sheet-is-hidem4" >
				<span></span>
			</span>
            <div class="sheet-hidem4">
                <div>When you mix, brew, or otherwise concoct a potion you know, roll +Magic. You must have the proper ingredients, a way to assemble them, and a wand. When you concoct a potion you don’t know, you must mark a point of Luck, then roll <strong>+Magic</strong>.</div>
                <div><span style="font-weight: bold;">On a 10+</span>, you correctly create the potion you wanted.</div>
                <div><span style="font-weight: bold;">On a 7-9</span>, you create the potion, but ... (pick one):</div>
                <ul>
					<li>It has some unintended side effect</li>
					<li>The process goes wonky and you take a Condition</li>
                    <li>You accidentally make a different potion (the Narrator tells you which one).</li>
				</ul>
                <div><span style="font-weight: bold;">On a 6-</span>, mark a point of Experience. You don’t create the potion successfully, and the Narrator may tell you a Serious Consequence that happens as a result.</div>
            </div>
        </div>
	</div>
    <div class="sheet-mm5">  <!-- MoveApproach a Magical Creature -->
   		<div>
        	<button type=action class=sheet-moveBtn name=act_approach title="When you approach a magical creature">Approach Magical Creature</button>
        	<input name="attr_is_hidem5" class="sheet-movem5" type="checkbox" checked="checked">
			<span class="sheet-is-hidem5" >
				<span></span>
			</span>
            <div class="sheet-hidem5">
                <div>When you try to tame, help, get help from, or otherwise approach a magical creature, roll <strong>+Loyalty</strong>.</div>
                <div><span style="font-weight: bold;">On a 10+</span>, the creature acts as you want.</div>
                <div><span style="font-weight: bold;">On a 7-9</span>, pick one:</div>
                <ul>
					<li>The creature acts as you want, but you take a Condition for your efforts</li>
					<li>The creature acts as you want, but it attracts unwanted attention</li>
                    <li>The creature doesn't act as you want, but it does something else helpful</li>
				</ul>
                <div><span style="font-weight: bold;">On a 6-</span>, mark a point of Experience. The creature goes wild, and  the Narrator may tell you a Serious Consequence that happens as a result.</div>
            </div>
        </div>
	</div>

	<div class="sheet-magicItems">
		<fieldset class="repeating_magicObjects">
			<button type=action class="sheet-invBtn" name="attr_mobtn"><span name=attr_item></span></button>
			<input name="attr_is_HideInv" class="sheet-inv" type="checkbox" checked="checked">
			<span class="sheet-is-HideInv" ><span></span></span>
			<div class="sheet-invConfig">
				<input type=text class="sheet-hdrText" name="attr_item" list="magicObjects" placeholder="Item">
				<input type=text class="sheet-hdrText" name="attr_item_max" placeholder="Item description">
			</div>
		</fieldset>
    </div>
    
</div>


<div class="sheet-y1spells">
   	<div style="grid-column: 1 / span 6; text-align:center;"><h3>Spells - Year 1</h3></div>
	<div>
		<input class=splCharm type=checkbox name=attr_y101 value="1" title="Learned"/>
       	<button type=roll class="sheet-splBtn" name="attr_btn101" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the unlocking charm}} {{spell=Alohamora}} {{lnt=[[1d@{y101}]]}}" title="Unlocking Charm">Alohamora</button>
	</div>
	<div>
       	<input class=splCurse type=checkbox name=attr_y102 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn102" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the hair loss curse}} {{spell=Calvario}} {{lnt=[[1d@{y102}]]}}" title="Hair Loss Curse">Calvario</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y103 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn103" value="/me &{template:desc} {{name=@{character_name}}} {{msg=casts the colour change charm}} {{spell=Colovaria}} {{lnt=[[1d@{y103}]]}}" title="Colour Change Charm">Colovaria</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y104 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn104" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the shrinking charm}} {{spell=Diminuendo}} {{lnt=[[1d@{y104}]]}}" title="Shrinking Charm">Diminuendo</button>
	</div>
	<div>
       	<input class=splDefence type=checkbox name=attr_y105 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn105" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the counter spell}} {{spell=Finite Incantatem}} {{lnt=[[1d@{y105}]]}}" title="Counter Spell">Finite Incantatem</button>
	</div>
	<div>
       	<input class=splCurse type=checkbox name=attr_y106 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn106" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the leg locker curse}} {{spell=Locomotor Mortis}} {{lnt=[[1d@{y106}]]}}" title="Leg Locker Curse">Locomotor Mortis</button>
	</div>
	<div>
		<input class=splCharm type=checkbox name=attr_y007 title="Learned" />
		<button type=roll class="sheet-splBtn" name="attr_btn107" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the wand lighting charm}} {{spell=Lumos}} {{lnt=[[1d@{y107}]]}}" title="Wand Lighting Charm">Lumos</button>
	</div>
	<div>
		<input class=splCharm type=checkbox name=attr_y108 title="Learned" />
		<button type=roll class="sheet-splBtn" name="attr_btn108" value="/me &{template:desc} {{name=@{character_name}}} {{msg=casts the red sparks charm}} {{spell=Periculum}} {{lnt=[[1d@{y108}]]}}" title="Red Sparks Charm">Periculum</button>
	</div>
	<div>
       	<input class=splCurse type=checkbox name=attr_y109 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn109" value="/me &{template:desc} {{name=@{character_name}}} {{msg=casts the full body bind curse}} {{spell=Petrificus Totalus}} {{lnt=[[1d@{y109}]]}}" title="Full Body Bind Curse">Petrificus Totalus</button>
	</div>
	<div>
       	<input class=splCurse type=checkbox name=attr_y110 title="Learned" />
      	<button type=roll class="sheet-splBtn" name="attr_btn110" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the slug vomiting curse}} {{spell=Slugulus Eructo}} {{lnt=[[1d@{y110}]]}}" title="Slug Vomiting Curse">Slugulus Eructo</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y111 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn111" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the softening charm}} {{spell=Spongify}} {{lnt=[[1d@{y111}]]}}" title="Softening Charm">Spongify</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y112 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn112" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the cleaning charm}} {{spell=Tergeo}} {{lnt=[[1d@{y112}]]}}" title="Cleaning Charm">Tergeo</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y113 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn113" value="/me &{template:desc} {{name=@{character_name}}} {{msg=casts the wind hex}} {{spell=Ventus}} {{lnt=[[1d@{y113}]]}}" title="Wind Hex">Ventus</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y114 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the levitation charm}} {{spell=Wingardium Leviosa}} {{lnt=[[1d@{y114}]]}}" title="Levitation Charm">Wingardium Leviosa</button>
	</div>
	<div>
		<input class=splPotion type=checkbox name=attr_y115 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn115" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Babbling Beverage}} {{lnt=[[1d@{y115}]]}}" title="Babbling Beverage Potion">Babbling Beverage</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y116 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn116" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Calming Draught}} {{lnt=[[1d@{y116}]]}}" title="Calming Draught Potion">Calming Draught</button>
	</div>
	<div>
        <input class=splPotion type=checkbox name=attr_y117 title="Learned" />
        <button type=roll class="sheet-splBtn" name="attr_btn117" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Cough Potion}} {{lnt=[[1d@{y117}]]}}" title="Cough Potion">Cough Potion</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y118 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn118" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Shrinking Solution}} {{lnt=[[1d@{y118}]]}}" title="Shrinking Solution Potion">Shrinking Solution</button>
	</div>
</div>

<div class="sheet-y2spells">
   	<div style="grid-column: 1 / span 6; text-align:center;"><h3>Spells - Year 2</h3></div>
	<div>
		<input class=splTransfig type=checkbox name=attr_y201 title="Learned"/>
       	<button type=roll class="sheet-splBtn" name="attr_btn201" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the bonding spell}} {{spell=Epoximise}} {{lnt=[[1d@{y201}]]}}" title="Bonding Spell">Epoximise</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y202 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn202" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the disarming charm}} {{spell=Expelliarmus}} {{lnt=[[1d@{y202}]]}}" title="Disarming Charm">Expelliarmus</button>
	</div>
	<div>
       	<input class=splTransfig type=checkbox name=attr_y203 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn203" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the fire writing spell}} {{spell=Flagrate}} {{lnt=[[1d@{y203}]]}}" title="Fire Writing Spell">Flagrate</button>
	</div>
	<div>
       	<input class=splTransfig type=checkbox name=attr_y204 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn204" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the smoke conjuring spell}} {{spell=Fumos}} {{lnt=[[1d@{y204}]]}}" title="Smoke Conjuring Spell">Fumos</button>
	</div>
	<div>
       	<input class=splTransfig type=checkbox name=attr_y205 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn205" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the fire conjuring spell}} {{spell=Incendio}} {{lnt=[[1d@{y205}]]}}" title="Fire Conjuring Spell">Incendio</button>
	</div>
	<div>
       	<input class=splCurse type=checkbox name=attr_y206 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn206" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the head cold curse}} {{spell=Mucus ad Nauseam}} {{lnt=[[1d@{y206}]]}}" title="Head Cold Curse">Mucus ad Nauseam</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y207 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn207" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the blindfolding charm}} {{spell=Obscuro}} {{lnt=[[1d@{y207}]]}}" title="Blindfolding Charm">Obscuro</button>
	</div>
	<div>
       	<input class=splDefence type=checkbox name=attr_y208 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn208" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the shield person spell}} {{spell=Protego}} {{lnt=[[1d@{y208}]]}}" title="Sheild Person Spell">Protego</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y209 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn209" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the repairing charm}} {{spell=Reparo}} {{lnt=[[1d@{y209}]]}}" title="Repairing Charm">Reparo</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y210 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn210" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the laughing hex}} {{spell=Rictusempra}} {{lnt=[[1d@{y210}]]}}" title="Laughing Hex">Rictusempra</button>
	</div>
	<div>
       	<input class=splTransfig type=checkbox name=attr_y211 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn211" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the snake conjuring spell}} {{spell=Serpensortia}} {{lnt=[[1d@{y211}]]}}" title="Snake-Conjuring Spell">Serpensortia</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y212 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn212" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the sneezing hex}} {{spell=Steleus}} {{lnt=[[1d@{y212}]]}}" title="Sneezing Hex">Steleus</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y213 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn213" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the tickling hex}} {{spell=Titillando}} {{lnt=[[1d@{y213}]]}}" title="Tickling Hex">Titillando</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y214 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn214" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Ageing Potion}} {{lnt=[[1d@{y214}]]}}" title="Aging Potion">Ageing Potion</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y215 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn215" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Beautification Potion}} {{lnt=[[1d@{y215}]]}}" title="Babbling Beverage Potion">Beautification Potion</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y216 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn216" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Hiccoughing Solution}} {{lnt=[[1d@{y216}]]}}" title="Hiccoughing Solution Potion">Hiccoughing Solution</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y217 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn217" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Mandrake Draught}} {{lnt=[[1d@{y217}]]}}" title="Anti-Curse Potion">Mandrake Draught</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y218 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn218" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion - Murtlap Essence}} {{lnt=[[1d@{y218}]]}}" title="Pain Soothing Potion">Murtlap Essence</button>
	</div>
</div>

<div class="sheet-y3spells">
   	<div style="grid-column: 1 / span 6; text-align:center;"><h3>Spells - Year 3</h3></div>
	<div>
		<input class=splHex type=checkbox name=attr_y301 title="Learned"/>
       	<button type=roll class="sheet-splBtn" name="attr_btn301" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the antler growing hex}} {{spell=Anteoculatia}} {{lnt=[[1d@{y301}]]}}" title="Antler growing hex">Anteoculatia</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y302 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn302" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the stickfast hex}} {{spell=Colloshoo}} {{lnt=[[1d@{y302}]]}}" title="Stickfast hex">Colloshoo</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y303 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn303" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the swelling hex}} {{spell=Engorgio}} {{lnt=[[1d@{y303}]]}}" title="Swelling hex">Engorgio</button>
	</div>
	<div>
       	<input class=splHealing type=checkbox name=attr_y304 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn304" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the splinting/bandaging spell}} {{spell=Ferula}} {{lnt=[[1d@{y304}]]}}" title="Splinting/Bandaging spell">Ferula</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y305 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn305" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=plant growth charm}} {{spell=Herbivicus}} {{lnt=[[1d@{y305}]]}}" title="Plant growth charml">Herbivicus</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y306 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn306" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the text scrambling charm}} {{spell=Illegibilus}} {{lnt=[[1d@{y306}]]}}" title="Text scrambling charm">Illegibilus</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y307 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn307" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the waterproofing charm}} {{spell=Impervius}} {{lnt=[[1d@{y307}]]}}" title="Waterproofing Charm">Impervius</button>
	</div>
	<div>
       	<input class=splCurse type=checkbox name=attr_y308 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn308" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the tongue tying curse}} {{spell=Mimble Wimble}} {{lnt=[[1d@{y308}]]}}" title="Tongue tying curse">Mimble Wimble</button>
	</div>
	<div>
       	<input class=splTransfig type=checkbox name=attr_y309 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn309" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the flower conjuring spell}} {{spell=Orchideous}} {{lnt=[[1d@{y309}]]}}" title="Flower conjuring spell">Orchideous</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y310 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn310" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the recent spell charm}} {{spell=Prior Incantato}} {{lnt=[[1d@{y310}]]}}" title="Recent spell charm">Prior Incantato</button>
	</div>
	<div>
       	<input class=splTransfig type=checkbox name=attr_y311 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn311" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the undo transfiguration spell}} {{spell=Reparifarge}} {{lnt=[[1d@{y311}]]}}" title="Undo Transfiguration Spell">Reparifarge</button>
	</div>
	<div>
       	<input class=splDefence type=checkbox name=attr_y312 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn312" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the Boggart defence spell}} {{spell=Riddikulus}} {{lnt=[[1d@{y312}]]}}" title="Goggart defence spell">Riddikulus</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y313 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn313" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the dancing hex}} {{spell=Tarantallegra}} {{lnt=[[1d@{y313}]]}}" title="dancing Hex">Tarantallegra</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y314 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn314" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Deflating Draught}} {{lnt=[[1d@{y314}]]}}" title="Deflating Draught">Deflating Draught</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y315 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn315" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Pepperup Potion}} {{lnt=[[1d@{y315}]]}}" title="Pepperup Potion">Pepperup Potion</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y316 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn316" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the friendship potion}} {{spell=Unctuous Unction}} {{lnt=[[1d@{y316}]]}}" title="Friendship Potion">Unctuous Unction</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y317 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn317" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Sleeping Draught}} {{lnt=[[1d@{y317}]]}}" title="Sleeping Potion">Sleeping Draught</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y318 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn318" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Swelling Solution}} {{lnt=[[1d@{y318}]]}}" title="swelling solution">Swelling Solution</button>
	</div>
</div>

<div class="sheet-y4spells">
   	<div style="grid-column: 1 / span 6; text-align:center;"><h3>Spells - Year 4</h3></div>
	<div>
		<input class=splCharm type=checkbox name=attr_y401 title="Learned"/>
       	<button type=roll class="sheet-splBtn" name="attr_btn401" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the summoning charm}} {{spell=Accio}} {{lnt=[[1d@{y401}]]}}" title="Summoning Charm">Accio</button>
	</div>
	<div>
       	<input class=splTransfig type=checkbox name=attr_y402 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn402" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the bird conjuring spell}} {{spell=Avis}} {{lnt=[[1d@{y402}]]}}" title="Bird-Conjuring Spell">Avis</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y403 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn403" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the teeth elongating hex}} {{spell=Densaugeo}} {{lnt=[[1d@{y403}]]}}" title="Teeth-Elongating Hex">Densaugeo</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y404 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn404" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the Banishing Charm}} {{spell=Depulsio}} {{lnt=[[1d@{y404}]]}}" title="Banishing Charm">Depulsio</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y405 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn405" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the cutting charm}} {{spell=Diffindo}} {{lnt=[[1d@{y405}]]}}" title="Cutting Charm">Diffindo</button>
	</div>
	<div>
       	<input class=splHealing type=checkbox name=attr_y406 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn406" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the minor healing spell}} {{spell=Episkey}} {{lnt=[[1d@{y406}]]}}" title="Minor Healing Spell">Episkey</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y407 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn407" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the pimple/boil hex}} {{spell=Furnunculus}} {{lnt=[[1d@{y407}]]}}" title="Pimple/Boil Hex">Furnunculus</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y408 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn408" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the slowing hex}} {{spell=Impedimenta}} {{lnt=[[1d@{y408}]]}}" title="Slowing Hex">Impedimenta</button>
	</div>
	<div>
       	<input class=splTransfig type=checkbox name=attr_y409 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn409" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the chain conjuring spell}} {{spell=Incaercerous}} {{lnt=[[1d@{y409}]]}}" title="Chain Conjuring spell">Incaercerous</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y410 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn410" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the jelly legs hex}} {{spell=Locomotor Wibbly}} {{lnt=[[1d@{y410}]]}}" title="Jelly-Legs hex">Locomotor Wibbly</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y411 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn411" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the quieting charm}} {{spell=Quietus}} {{lnt=[[1d@{y411}]]}}" title="Quieting Charm">Quietus</button>
	</div>
	<div>
       	<input class=splCurse type=checkbox name=attr_y412 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn412" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the smashing curse}} {{spell=Reducto}} {{lnt=[[1d@{y412}]]}}" title="Smashing Curse">Reducto</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y413 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn413" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the amplifying charm}} {{spell=Sonorus}} {{lnt=[[1d@{y413}]]}}" title="Amplifying Charm">Sonorus</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y414 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn414" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the stunning charm}} {{spell=Stupefy}} {{lnt=[[1d@{y414}]]}}" title="Stunning Charm">Stupefy</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y415 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn415" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the acne treatment potion}} {{spell=Blemish Blitzer}} {{lnt=[[1d@{y415}]]}}" title="Acne Treatment Potion">Blemish Blitzer</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y416 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn416" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the fire protection potion}} {{spell=Fire Protection Potion}} {{lnt=[[1d@{y416}]]}}" title="Fire Protection Potion">Fire Protection Potion</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y417 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn417" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Laxative Potion}} {{lnt=[[1d@{y417}]]}}" title="Laxative Potion">Laxative Potion</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y418 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn418" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Invigoration Draught}} {{lnt=[[1d@{y418}]]}}" title="Invigoration Draught">Invigoration Draught</button>
	</div>
</div>

<div class="sheet-y5spells">
   	<div style="grid-column: 1 / span 6; text-align:center;"><h3>Spells - Year 5</h3></div>
	<div>
		<input class=splHealing type=checkbox name=attr_y501 title="Learned"/>
       	<button type=roll class="sheet-splBtn" name="attr_btn501" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=reverse choking spell}} {{spell=Anapneo}} {{lnt=[[1d@{y501}]]}}" title="Reverse Choking Spell">Anapneo</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y502 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn502" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the opening charm}} {{spell=Aperio}} {{lnt=[[1d@{y502}]]}}" title="Opening Charm">Aperio</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y503 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn503" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the singing hex}} {{spell=Cantis}} {{lnt=[[1d@{y503}]]}}" title="Singing Hex">Cantis</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y504 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn504" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the locking charm}} {{spell=Colloportus}} {{lnt=[[1d@{y504}]]}}" title="Locking Charm">Colloportus</button>
	</div>
	<div>
       	<input class=splTransfig type=checkbox name=attr_y505 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn505" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the vanishing spell}} {{spell=Evanesco}} {{lnt=[[1d@{y505}]]}}" title="Vanishing Spell">Evanesco</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y506 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn506" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the patronus charm}} {{spell=Expecto Patronum}} {{lnt=[[1d@{y506}]]}}" title="Patronus Charm">Expecto Patronum</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y507 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn507" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the attacking objects hex}} {{spell=Oppugno}} {{lnt=[[1d@{y507}]]}}" title="Attacking Objects Hex">Oppugno</button>
	</div>
	<div>
       	<input class=splDefence type=checkbox name=attr_y508 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn508" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the shield area spell}} {{spell=Protego Totalum}} {{lnt=[[1d@{y508}]]}}" title="Shield Area Spell">Protego Totalum</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y509 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn509" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the releasing hex}} {{spell=Relashio}} {{lnt=[[1d@{y509}]]}}" title="Releasing Hex">Relashio</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y510 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn510" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the anti-muggle charm}} {{spell=Repello Muggletum}} {{lnt=[[1d@{y510}]]}}" title="Anti-Muggle charm">Repello Muggletum</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y511 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn511" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the silencing  charm}} {{spell=Silencio}} {{lnt=[[1d@{y511}]]}}" title="Silencing Charm">Silencio</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y512 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn512" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the hex revealing charm}} {{spell=Specialis Revelio}} {{lnt=[[1d@{y512}]]}}" title="Hex-Revealing Charm">Specialis Revelio</button>
	</div>
	<div>
       	<input class=splHealing type=checkbox name=attr_y513 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn513" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the gash healing spell}} {{spell=Vulnera Sanentur}} {{lnt=[[1d@{y513}]]}}" title="Gash-Healing spell">Vulnera Sanentur</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y514 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn514" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the love potion}} {{spell=Amortentia}} {{lnt=[[1d@{y514}]]}}" title="Love Potion">Amortentia</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y515 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn515" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Befuddlement Draught}} {{lnt=[[1d@{y515}]]}}" title="Befuddlement Draught">Befuddlement Draught</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y516 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn516" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the healing potion}} {{spell=Essence of Dittany}} {{lnt=[[1d@{y516}]]}}" title="Healing Potion">Essence of Dittany</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y517 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn517" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Love Potion Antidote}} {{lnt=[[1d@{y517}]]}}" title="Love Potion Antidote">Love Potion Antidote</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y518 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn518" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Wit-Sharpening Potion}} {{lnt=[[1d@{y518}]]}}" title="Wit-Sharpening Potion">Wit-Sharpening Potion</button>
	</div>
</div>

<div class="sheet-y6spells">
   	<div style="grid-column: 1 / span 6; text-align:center;"><h3>Spells - Year 6</h3></div>
	<div>
		<input class=splTransfig type=checkbox name=attr_y601 title="Learned"/>
       	<button type=roll class="sheet-splBtn" name="attr_btn601" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the water conjuring spell}} {{spell=Aguamenti}} {{lnt=[[1d@{y601}]]}}" title="Water-Conjuring Spell">Aguamenti</button>
	</div>
	<div>
       	<input class=splTransfig type=checkbox name=attr_y602 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn602" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the teleportation spell}} {{spell=Apparrate}} {{lnt=[[1d@{y602}]]}}" title="Teleportation spell">Apparrate</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y603 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn603" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the confusion charm}} {{spell=Confundo}} {{lnt=[[1d@{y603}]]}}" title="Confusion Charm">Confundo</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y604 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn604" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the hole blasting charm}} {{spell=Deprimo}} {{lnt=[[1d@{y604}]]}}" title="Hole-Blasting Charm">Deprimo</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y605 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn605" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the bubble hex}} {{spell=Ebublio}} {{lnt=[[1d@{y605}]]}}" title="Bubble Hex">Ebublio</button>
	</div>
	<div>
       	<input class=splHealing type=checkbox name=attr_y606 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn606" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the bone mending spell}} {{spell=Emendo}} {{lnt=[[1d@{y606}]]}}" title="Bone Mending Spell">Emendo</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y607 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn607" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the knockback hex}} {{spell=Flipendo}} {{lnt=[[1d@{y607}]]}}" title="Knockback Hex">Flipendo</button>
	</div>
	<div>
       	<input class=splCurse type=checkbox name=attr_y608 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn608" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the duplicating objects curse}} {{spell=Gemino}} {{lnt=[[1d@{y608}]]}}" title="Duplicating Objects Curse">Gemino</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y609 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn609" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the tongue locking hex}} {{spell=Langlock}} {{lnt=[[1d@{y609}]]}}" title="Tongue Locking Hex">Langlock</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y610 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn610" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the pumpkin head hex}} {{spell=Melofors}} {{lnt=[[1d@{y610}]]}}" title="Pumpkin Head Hex">Melofors</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y611 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn611" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the ear buzzing charm}} {{spell=Muffliato}} {{lnt=[[1d@{y611}]]}}" title="Ear Buzzing Charm">Muffliato</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y612 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn612" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the chicken/goose hex}} {{spell=Pullus}} {{lnt=[[1d@{y612}]]}}" title="Chicken/Goose Hex">Pullus</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y613 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn613" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the revealing charm}} {{spell=Revelio}} {{lnt=[[1d@{y613}]]}}" title="Revealing Charm">Revelio</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y614 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn614" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Draught of Living Death}} {{lnt=[[1d@{y614}]]}}" title="Draught of Living Death Potion">Draught of Living Death</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y615 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn615" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the choking potion}} {{spell=Garroting Gas}} {{lnt=[[1d@{y615}]]}}" title="Choking Potion">Garroting Gas</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y616 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn616" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Strengthening Solution}} {{lnt=[[1d@{y616}]]}}" title="Strengthening Solution Potion">Strengthening Solution</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y617 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn617" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the truth potion}} {{spell=Veritaserum}} {{lnt=[[1d@{y617}]]}}" title="Truth Potion">Veritaserum</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y618 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn618" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the antidote to}} {{spell=Veritaserum}} {{lnt=[[1d@{y618}]]}}" title="Veritaserum Antidote">Veritaserum Antidote</button>
	</div>
</div>

<div class="sheet-y7spells">
   	<div style="grid-column: 1 / span 6; text-align:center;"><h3>Spells - Year 7</h3></div>
	<div>
		<input class=splTransfig type=checkbox name=attr_y701 title="Learned"/>
       	<button type=roll class="sheet-splBtn" name="attr_btn701" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=lightning conjuring spell}} {{spell=Baubillious}} {{lnt=[[1d@{y701}]]}}" title="Lightning Conjuring Spell">Baubillious</button>
	</div>
	<div>
       	<input class=splCurse type=checkbox name=attr_y702 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn702" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the blasting curse}} {{spell=Confrigo}} {{lnt=[[1d@{y702}]]}}" title="Blasting Curse">Confrigo</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y703 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn703" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the hardening charm}} {{spell=Duro}} {{lnt=[[1d@{y703}]]}}" title="The Hardening Charm">Duro</button>
	</div>
	<div>
       	<input class=splDefence type=checkbox name=attr_y704 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn704" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the increase protection spell}} {{spell=Fianto Duri}} {{lnt=[[1d@{y704}]]}}" title="Increase Protection Spell">Fianto Duri</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y705 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn705" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=Reveal person charm}} {{spell=Homenum Revelio}} {{lnt=[[1d@{y705}]]}}" title="Reveal Person Charm">Homenum Revelio</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y706 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn706" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the mind seeing charm}} {{spell=Legillimens}} {{lnt=[[1d@{y706}]]}}" title="Mind Seeing Charm">Legillimens</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y707 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn707" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the body lifting hex}} {{spell=Levicorpus}} {{lnt=[[1d@{y707}]]}}" title="Body Lifting Hex">Levicorpus</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y708 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn708" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the mutation hex}} {{spell=Mutatio}} {{lnt=[[1d@{y708}]]}}" title="Mutation Hex">Mutatio</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y709 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn709" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the memory erasing charm}} {{spell=Obliviate}} {{lnt=[[1d@{y709}]]}}" title="Memory Erasing Charm">Obliviate</button>
	</div>
	<div>
       	<input class=splCharm type=checkbox name=attr_y710 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn710" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the portkey creating charm}} {{spell=Portus}} {{lnt=[[1d@{y710}]]}}" title="Port Key Creation Charm">Portus</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y711 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn711" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the shrinking hex}} {{spell=Redactum}} {{lnt=[[1d@{y711}]]}}" title="Shrinking Hex">Redactum</button>
	</div>
	<div>
       	<input class=splHex type=checkbox name=attr_y712 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn712" value="/me &{template:desc} {{name=@{character_name}}} {{msg=cast}} {{msg2=the worm hex}} {{spell=Vermiculus}} {{lnt=[[1d@{y712}]]}}" title="Worm Hex">Vermiculus</button>
	</div>
	<div>
       	<input class=splHealing type=checkbox name=attr_y713 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn713" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Blood-Replenishing Potion}} {{lnt=[[1d@{y713}]]}}" title="Blood-Replenishing Potion">Blood-Replenishing</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y714 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn714" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Euphoria Elixir}} {{lnt=[[1d@{y714}]]}}" title="Euphoria Elixir">Euphoria Elixir</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y715 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn715" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the luck potion}} {{spell=Felix Felicis}} {{lnt=[[1d@{y715}]]}}" title="Luck Potion">Felix Felicis</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y716 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn716" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the potion}} {{spell=Forgetfulness Potion}} {{lnt=[[1d@{y716}]]}}" title="Forgetfulness Potion">Forgetfulness Potion</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y717 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn717" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the transformation potion}} {{spell=Polyjuice Potion}} {{lnt=[[1d@{y717}]]}}" title="Transformation Potion">Polyjuice Potion</button>
	</div>
	<div>
       	<input class=splPotion type=checkbox name=attr_y718 title="Learned" />
       	<button type=roll class="sheet-splBtn" name="attr_btn718" value="/me &{template:desc} {{name=@{character_name}}} {{msg=concoct}} {{msg2=the bone regrowth potion}} {{spell=Invigoration Draught}} {{lnt=[[1d@{y718}]]}}" title="Bone Regrowth Potion">Skele-Gro</button>
	</div>
</div>

<div class="sheet-y0spells">
   	<div style="grid-column: 1 / span 5; text-align:center;"><h3 style=" color: red;">Unforgivable Curses</h3></div>
	<div></div>
    <div>
		<input class=unforgive type=checkbox name=attr_y001 value="1" title="Learned"/>
       	<button type=roll class="sheet-curseBtn" name="attr_btn001" value="/me &{template:curse} {{name=@{character_name}}} {{msg=cast}} {{msg2=the unforgivable killing curse}} {{spell=Avada Kedavra}} {{lnt=[[1d@{y001}]]}}" title="UnforgivableKilling Curse">Avada Kedavra</button>
	</div>
	<div>
       	<input class=unforgive type=checkbox name=attr_y002 title="Learned" />
       	<button type=roll class="sheet-curseBtn" name="attr_btn002" value="/me &{template:curse} {{name=@{character_name}}} {{msg=cast}} {{msg2=the unforgivable pain curse}} {{spell=Crucio}} {{lnt=[[1d@{y002}]]}}" title="Unforgivable Pain Curse">Crucio</button>
	</div>
	<div>
       	<input class=unforgive type=checkbox name=attr_y003 title="Learned" />
       	<button type=roll class="sheet-curseBtn" name="attr_btn003" value="/me &{template:curse} {{name=@{character_name}}} {{msg=cast}} {{msg2=the unforgivable mind control curse}} {{spell=Imperio}} {{lnt=[[1d@{y003}]]}}" title="Unforgivable Mind Control Curse">Imperio2</button>
	</div>
</div>

<div class="sheet-quidditch">
	<h3 style="padding:6px;">&emsp;Quidditch</h3>
    <div style="columns:2;">
      	<div style="break-inside: avoid;">
        	<button type=action class=sheet-moveBtn name=act_playQ title="When you play a game of Quidditch">Play a Quidditch Match</button>
        	<input name="attr_is_hideq1" class="sheet-moveq1" type="checkbox" checked="checked">
			<span class="sheet-is-hideq1" >
				<span></span>
			</span>
            <div class="sheet-hideq1" style="font-size:10px;">
                <div> when you have control. Describe the match up until your team is about to make a risky play, then roll…
                    <ul>
                        <li><strong>+Bravery</strong> if your team is playing boldly.</li>
                        <li><strong>+Cunning</strong> if your team is playing dirty.</li>
                        <li><strong>+Intellect</strong> if your team is playing tactically.</li>
                        <li><strong>+Loyalty</strong> if your team is playing with great teamwork.</li>
                    </ul>
</div>
                <div><span style="font-weight: bold;">On a 10+</span>, you keep control of the match and your team scores 10 points!</div>
                <div><span style="font-weight: bold;">On a 7-9</span>, neither team scores and you pass control of the match to another player. Your team doesn’t get a goal because (pick one)...</div>
                <ul>
					<li>Someone on your team misses a throw or a catch!</li>
					<li>Someone on your team is hit by a Bludger!</li>
                    <li>Your team’s play doesn’t go as planned!</li>
                    <li>The other team pulls a trick play!</li>
				</ul>
                <div><span style="font-weight: bold;">On a 6-</span>, mark a point of Experience and pass control & this sheet to the person to another player. Your team doesn’t score, and the Narrator describes how the other team scores 10 points.</div>
            </div>
        </div>
		<div style="break-inside: avoid;">
        	<button type=action class=sheet-moveBtn name=act_catchS title="After the narrator has announced the golden snitch is spotted then if you have control of the game you can try to catch the golden snitch">Catch the Golden Snitch</button>
        	<input name="attr_is_hideq2" class="sheet-moveq2" type="checkbox" checked="checked">
			<span class="sheet-is-hideq2" >
				<span></span>
			</span>
            <div class="sheet-hideq2" style="font-size:10px;">
                <div>At some point during the match, the Narrator will announce that someone has spotted the Golden Snitch. If you have control of the match, your team’s Seeker can try to catch the Golden Snitch.<br />Work with anyone playing a Seeker to describe the match up until your team’s Seeker is about to catch the Golden Snitch, then roll…
                                    <ul>
                        <li><strong>+Bravery</strong> if your team is playing boldly.</li>
                        <li><strong>+Cunning</strong> if your team is playing dirty.</li>
                        <li><strong>+Intellect</strong> if your team is playing tactically.</li>
                        <li><strong>+Loyalty</strong> if your team is playing with great teamwork.</li	>
                    </ul>
			</div>
                <div><span style="font-weight: bold;">On a 10+</span>, you do it! Your team catches the Golden Snitch and ends the match, giving your team 150 points.</div>
                <div><span style="font-weight: bold;">On a 7-9</span>, your team isn’t able to catch the Golden Snitch, but neither is the other team. Pass control of the match to another person.</div>
                <div><span style="font-weight: bold;">On a 6-</span>, mark a point of Experience. Your team fails to catch the Golden Snitch, and the other team gets it for 150 points.</div>
            </div>
        </div>
    </div>
	<div style="padding-left: 1em; padding-right: 1em;"><br />    
        <h4> Quidditch Seasons</h4>
        <fieldset class="repeating_seasons">
            <div>Season: <input class=sheet-quiText type=text name=attr_season/>&emsp; Current Champions:<input class=sheet-quiText type=text name=attr_season_max/></div>
            <div>
            Gryffindor:<input type="number" class=sheet-qscore name="attr_g" value="@{g1}+@{g3}+@{g6}" disabled="true" style="width: 6em; font-weight:bolder; text-align: left; color: black; background-color:transparent; border:none;"/>
            Hufflepuff:<input type="number" class=sheet-qscore name="attr_h" value="@{h1}+@{h4}+@{h5}" disabled="true" style="width: 6em; font-weight:bolder; text-align: left; color: black; background-color:transparent; border:none;"/>
            Ravensclaw:<input type="number" class=sheet-qscore name="attr_r" value="@{r2}+@{r3}+@{r5}" disabled="true" style="width: 6em; font-weight:bolder; text-align: left; color: black; background-color:transparent; border:none;"/>		
            Slytherin:<input type="number" class=sheet-qscore name="attr_s" value="@{s2}+@{s4}+@{s6}" disabled="true" style="width: 6em; font-weight:bolder; text-align: left; color: black; background-color:transparent; border:none;"/>	
            <input name="attr_is_HideQid" class="sheet-qid" type="checkbox" checked="checked">
            <span class="sheet-is-HideQid" ><span></span></span>
            <div class="sheet-qidConfig">
                <h4>Matches</h4>
				<div class="sheet-matchday">
					<span>1.</span><span><strong>Gryffindor</strong>:</span><span><input type=text class="sheet-qScore" name="attr_g1" value="0"></span><span>vs</span>
					<span><strong>Hufflepuff</strong>:</span><input type=text class="sheet-qScore" name="attr_h1" value="0"></span>
					<span>Position:</span><span><input type=text class="sheet-quiText" name="attr_m1pos" placeholder="position" list="positions"></span><span></span>
					<span>2.</span><span><strong>Ravenclaw</strong>:</span><span><input type=text class="sheet-qScore" name="attr_r2" value="0"></span><span>vs</span>
					<span><strong>Slytherin</strong>:</span><input type=text class="sheet-qScore" name="attr_s2" value="0"></span>
					<span>Position:</span><input type=text class="sheet-quiText" name="attr_m2pos" placeholder="position" list="positions"></span><span></span>
					<span>3.</span><span><strong>Ravenclaw</strong>:</span><span><input type=text class="sheet-qScore" name="attr_r3" value="0"></span><span>vs</span>
					<span><strong>Gryffindor</strong>:</span><input type=text class="sheet-qScore" name="attr_g3" value="0"></span>
					<span>Position:</span><input type=text class="sheet-quiText" name="attr_g3pos" placeholder="position" list="positions"></span><span></span>
					<span>4.</span><span><strong>Slytherin</strong>:</span><span><input type=text class="sheet-qScore" name="attr_s4" value="0"></span><span>vs</span>
					<span><strong>Hufflepuff</strong>:</span><input type=text class="sheet-qScore" name="attr_h4" value="0"></span>
					<span>Position:</span><input type=text class="sheet-quiText" name="attr_m5pos" placeholder="position" list="positions"></span><span></span>
					<span>5.</span><span><strong>Hufflepuff</strong>:</span><span><input type=text class="sheet-qScore" name="attr_h5" value="0"></span><span>vs</span>
					<span><strong>Ravenclaw</strong>:</span><input type=text class="sheet-qScore" name="attr_r5" value="0"></span>
					<span>Position:</span><input type=text class="sheet-quiText" name="attr_m5pos" placeholder="position" list="positions"></span><span></span>
					<span>6.</span><span><strong>Gryffindor</strong>:</span><span><input type=text class="sheet-qScore" name="attr_g6" value="0"></span><span>vs</span>
					<span><strong>Slytherin</strong>:</span><input type=text class="sheet-qScore" name="attr_s6" value="0"></span>
					<span>Position:</span><input type=text class="sheet-quiText" name="attr_m6pos" placeholder="position" list="positions"></span><span></span>
				</div>
            </div>
        </fieldset>
    </div>
</div>
<div class="sheet-quidditch">
	<h3 style="padding:6px;">&emsp;Misc</h3>
		<div style="text-align:center; padding-top:5px;">
        	<button class=myActBtn3 type=action name=act_wgmCom title="Whisper comment to GM">chat: /w gm</button>
			<button class=myActBtn3 type=action name=act_oocCom title="Make an Out of Character comment">chat: /ooc</button>
			<button class=myActBtn3 type=action name=act_meCom title="Make an emote comment">chat: /me</button>
			<button class=myActBtn3 type=action name=act_custRoll title="Custom dice roll">Custom Roll</button>
		</div>
</div>


<!-- Roll Templates -->
<rolltemplate class="sheet-rolltemplate-basic">
    <div class="sheet-container">
        <div class="sheet-hdr">
        	<span style="font-weight:bold;">{{name}}</span> rolls <span style="font-weight:bold;">{{trait}}</span>
        </div>
        <div class="sheet-results">
            <div>Result: {{roll1}}</div>
        </div>
        <div>
            {{#rollLess() roll1 7}}
				<div class="sheet-fail">6-</div>
                <div class="sheet-expl">You don’t manage it and the Narrator tells you how things get worse.</div>
                <div class="sheet-expl"> However you get to mark a point of Experience.</div>
            {{/rollLess() roll1 7}}
            {{#rollBetween() roll1 7 9}}
				<div class="sheet-partial">7-9</div>
                <div class="sheet-expl">You do it, but there’s a cost.</div>
            {{/rollBetween() roll1 7 9}}
            {{#rollGreater() roll1 9}}
				<div class="sheet-success">10+</div>
                <div class="sheet-expl">You do it without a problem. Wicked!</div>
            {{/rollGreater() roll1 9}}
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-moves">
    <div class="sheet-container">
        <div class="sheet-hdr">
        	<span style="font-weight:bold;">{{name}}</span> Uses Move <span style="font-weight:bold;">{{trait}}</span>
        </div>
        <div class="sheet-results">
            <div>Result: {{roll1}}</div>
        </div>
        <div>
            {{#rollLess() roll1 7}}
				<div class="sheet-fail">6-</div>
                <div class="sheet-expl">{{fail}}</div>
                {{#xp}}
                <div class="sheet-expl">{{xp}}</div>
                {{/xp}}
            {{/rollLess() roll1 7}}
            {{#rollBetween() roll1 7 9}}
				<div class="sheet-partial">7-9</div>
                <div class="sheet-expl">{{partial}}</div>
            {{/rollBetween() roll1 7 9}}
            {{#rollGreater() roll1 9}}
				<div class="sheet-success">10+</div>
                <div class="sheet-expl">{{success}}</div>
            {{/rollGreater() roll1 9}}
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-mObj">
    <div class="sheet-container">
        {{msg}}
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-desc">
    <div class="sheet-container">
     {{#rollTotal() lnt 0}}
     	<div class="sheet-myDesc"><!--{{name}}-->uses Luck to {{msg}} {{msg2}} - {{spell}}</div>
     {{/rollTotal() lnt 0}}
     {{#rollTotal() lnt 1}}
     	<div class="sheet-myDesc"><!--{{name}}-->{{msg}}s {{msg2}} - {{spell}}</div>
     {{/rollTotal() lnt 1}}
    </div>
</rolltemplate>
<rolltemplate class="sheet-rolltemplate-curse">
    <div class="sheet-container" style="color: red;">
     {{#rollTotal() lnt 0}}
     	<div class="sheet-myDesc"><!--{{name}}-->uses Luck to {{msg}} {{msg2}} - {{spell}}</div>
     {{/rollTotal() lnt 0}}
     {{#rollTotal() lnt 1}}
     	<div class="sheet-myDesc"><!--{{name}}-->{{msg}}s {{msg2}} - {{spell}}</div>
     {{/rollTotal() lnt 1}}
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-ooc">
    <div class="sheet-template-container">
		<div style="color:#C21401; font-size:16px;font-style:italic;">
			{{comment}}
		</div>
	</div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-wgm">
    <div class="sheet-template-container">
		<div style="color:#9933CC;font-size:16px;">
			{{comment}}
		</div>
	</div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-me">
			{{comment}}
</rolltemplate>
<rolltemplate class="sheet-rolltemplate-as">
			{{comment}}
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-custRoll">
    <div class="sheet-container">
        <div class=sheet-hdr>
        	<div>{{name}}</div>
        </div> 
        <div class=sheet-content>
            <div style="text-align: center;">Custom Roll</div>           
            <div style="text-align:center">{{comment}} = {{roll1}}</div>           
			{{#reason}}
				<div>Reason:&nbsp;{{reason}}</div>
			{{/reason}}
        </div>
</rolltemplate>

<script type="text/worker">

on("clicked:repeating_magicObjects:mobtn", function() {
	getAttrs(['repeating_magicObjects_item'], function(v) {
		let myItm = v.repeating_magicObjects_item||"";
		let macro="&{template:mObj} {{msg=@{character_name} uses " + myItm + "}}";
		startRoll(macro, (results) => {
			finishRoll(
				results.rollId,
			);
		});
	});
});

['Bravery', 'Cunning', 'Intellect', 'Loyalty', 'Magic' ].forEach(attr => {
    on(`clicked:${attr}`, (info) => {
		getAttrs([`${attr}`, 'scared', 'angry', 'stressed', 'jealous', 'embarrassed', 'injured', 'hexed_max', 'globalMod', 'favSubj'], function(v) {
			let tmpMod = parseInt(v[`${attr}`])||0;
			let cond = parseInt(v.injured)||0; 
			let glbl = parseInt(v.globalMod)||0; 
			let fs = parseInt(v.favSubj)||0; 
			let hxd = v.hexed_max; 
			switch (`${attr}`){
				case 'Bravery':
					cond += parseInt(v.scared)||0;
					break;
				case 'Cunning':
					cond += parseInt(v.angry)||0;
					break;
				case 'Intellect':
					cond += parseInt(v.stressed)||0;
					break;
				case 'Loyalty':
					cond += parseInt(v.jealous)||0;
					break;
				case 'Magic':
					cond += parseInt(v.embarrassed)||0;
					break;
			};
			if (hxd == `${attr}`) {tmpMod -=1;};
			tmpMod += cond;	
			let tmpRoll = "2d6";
			if (tmpMod<0){
				tmpRoll += "-" + Math.abs(tmpMod) + " [Mods]"
			};
			if (tmpMod>0){
				tmpRoll += "+" + Math.abs(tmpMod) + " [Mods]"
			};
			if (glbl<0){
				tmpRoll += "-" + Math.abs(glbl) + " [Global Mod]"
			};
			if (glbl>0){
				tmpRoll += "+" + Math.abs(glbl) + " [Global Mod]"
			};
			if (fs==1) {tmpRoll += "+" + Math.abs(fs) + " [Fav.Subj.]";};
			startRoll("&{template:basic} {{name=@{character_name}}} {{trait=" + `${attr}` + "}} {{roll1=[[" + tmpRoll + "]]}}", (results) => {
				const total = results.results.roll1.result
				const computed = total % 4;
				finishRoll(
					results.rollId,
					{
						roll1: computed,
					}
				);
			});
		});
    });
});

on('clicked:exit', (info) => {
	getAttrs(['Bravery', 'Cunning', 'Intellect', 'Loyalty', 'Magic', 'globalMod'], function(v) {
		let tmpMod = [parseInt(v.Bravery)||0,parseInt(v.Cunning)||0,parseInt(v.Intellect)||0,parseInt(v.Loyalty)||0,parseInt(v.Magic)||0];
		let glbl = parseInt(v.globalMod)||0; 
		let maxT = Math.max(...tmpMod);
		let tmpRoll = "2d6";
		if (maxT<0){
			tmpRoll += "-" + Math.abs(maxT) + " [Max Trait]"
		};
		if (maxT>=0){
			tmpRoll += "+" + Math.abs(maxT) + " [Max Trait]"
		};
		if (glbl<0){
			tmpRoll += "-" + Math.abs(glbl) + " [Global Mod]"
		};
		if (glbl>0){
			tmpRoll += "+" + Math.abs(glbl) + " [Global Mod]"
		};
		startRoll("&{template:moves} {{name=@{character_name}}} {{trait=Exit Story}} {{roll1=[[" + tmpRoll + "]]}} {{success=You come back with all Conditions cleared.}} {{partial=You come back with only Unconscious cleared.}} {{fail=You exit the story. Create a new witch/wizard.}}", (results) => {
			const total = results.results.roll1.result
			const computed = total % 4;
			finishRoll(
				results.rollId,
				{
					roll1: computed,
				}
			);
		});
	});
});	

on('clicked:stand', (info) => {
	getAttrs(['Bravery', 'globalMod', 'favSubj'], function(v) {
		let tmpMod = parseInt(v.Bravery)||0;
		let glbl = parseInt(v.globalMod)||0; 
		let fs = parseInt(v.favSubj)||0;
		let tmpRoll = "2d6";
		if (tmpMod<0){
			tmpRoll += "-" + Math.abs(tmpMod) + " [Bravery]"
		};
		if (tmpMod>=0){
			tmpRoll += "+" + Math.abs(tmpMod) + " [Bravery]"
		};
		if (glbl<0){
			tmpRoll += "-" + Math.abs(glbl) + " [Global Mod]"
		};
		if (glbl>0){
			tmpRoll += "+" + Math.abs(glbl) + " [Global Mod]"
		};
		if (fs==1) {tmpRoll += "+" + Math.abs(fs) + " [Fav.Subj.]";};
		let macro="&{template:moves} {{name=@{character_name}}} {{trait=Stand in the Face of Danger}} {{roll1=[[" + tmpRoll + "]]}}";
		macro += "{{success=Pick one:\n• [You stand firm and nobody gets hurt](`/me : You stand firm and nobody gets hurt).\n• [You aren’t hurt, and you hurt the threat right back](`/me : You aren’t hurt, and you hurt the threat right back).}}";
		macro += "{{partial=Pick one:\n• [You hurt the threat, but it hurts you as well](`/me : You hurt the threat, but it hurts you as well).\n• [You aren’t able to act, but the threat backs off](`/me : You aren’t able to act, but the threat backs off).\n• [You flee, but you don’t suffer any Serious Consequences](`/me : You flee, but you don’t suffer any Serious Consequences).\n• [You avoid Serious Consequences, but someone else suffers them instead](`/me : You avoid Serious Consequences, but someone else suffers them instead).}}";
		macro += "{{fail=You aren’t able to face the danger.}}";
		macro += "{{xp=Mark a point of Experience}}";
		startRoll(macro, (results) => {
			const total = results.results.roll1.result
			const computed = total % 4;
			finishRoll(
				results.rollId,
				{
					roll1: computed,
				}
			);
		});
	});
});
	
on('clicked:hide', (info) => {
	getAttrs(['Cunning', 'globalMod', 'favSubj'], function(v) {
		let tmpMod = parseInt(v.Cunning)||0;
		let glbl = parseInt(v.globalMod)||0; 
		let fs = parseInt(v.favSubj)||0;
		let tmpRoll = "2d6";
		if (tmpMod<0){
			tmpRoll += "-" + Math.abs(tmpMod) + " [Cunning]"
		};
		if (tmpMod>=0){
			tmpRoll += "+" + Math.abs(tmpMod) + " [Cunning]"
		};
		if (glbl<0){
			tmpRoll += "-" + Math.abs(glbl) + " [Global Mod]"
		};
		if (glbl>0){
			tmpRoll += "+" + Math.abs(glbl) + " [Global Mod]"
		};
		if (fs==1) {tmpRoll += "+" + Math.abs(fs) + " [Fav.Subj.]";};
		let macro="&{template:moves} {{name=@{character_name}}} {{trait=Hide & Sneak}} {{roll1=[[" + tmpRoll + "]]}}";
		macro += "{{success=You or whatever you’re hiding aren’t detected.}}";
		macro += "{{partial=Pick one:\n• [Someone or something is looking for you or what you’ve hidden](`/me : Someone or something is looking for you or what you’ve hidden).\n• [Someone or something knows you’re here or that you’ve hidden something, but not where](`/me : Someone or something knows you’re here or that you’ve hidden something, but not where).\n• [You leave some kind of trace or evidence behind](`/me : You leave some kind of trace or evidence behind).}}";
		macro += "{{fail=You or whatever you’re hiding are found.}}";
		macro += "{{xp=Mark a point of Experience}}";
		startRoll(macro, (results) => {
			const total = results.results.roll1.result
			const computed = total % 4;
			finishRoll(
				results.rollId,
				{
					roll1: computed,
				}
			);
		});
	});
});
	
on('clicked:help', (info) => {
	getAttrs(['Loyalty', 'globalMod', 'favSubj', 'friend1', 'friend2', 'rival'], function(v) {
		let f1 = v.friend1||"";
		let f2 = v.friend2||"";
		let r1 = v.rival||"";
		let myQ = "+?{Select Friend or Rival to help or hinder";
		if (f1.length > 0){
			myQ = myQ.concat("|" + f1 + ", 1 [Friend " + f1 + "] ");
	    };
		if (f2.length > 0){
			myQ = myQ.concat("|" + f2 + ", 1 [Friend " + f2 + "] ");
	    }
		if (r1.length > 0){
			myQ = myQ.concat("|" + r1 + ", 1 [Rival " + r1 + "] ");
	    }
		myQ = myQ.concat("|Someone else, 0 [Someone else]}");
		let tmpMod = parseInt(v.Loyalty)||0;
		let glbl = parseInt(v.globalMod)||0;
		let fs = parseInt(v.favSubj)||0; 	 
		let tmpRoll = "2d6";
		if (tmpMod<0){
			tmpRoll += "-" + Math.abs(tmpMod) + " [Loyalty]"
		};
		if (tmpMod>=0){
			tmpRoll += "+" + Math.abs(tmpMod) + " [Loyalty]"
		};
		if (glbl<0){
			tmpRoll += "-" + Math.abs(glbl) + " [Global Mod]"
		};
		if (glbl>0){
			tmpRoll += "+" + Math.abs(glbl) + " [Global Mod]"
		};
		if (fs==1) {tmpRoll += "+" + Math.abs(fs) + " [Fav.Subj.]";};
		if (myQ != '+?{Select Friend or Rival to help or hinder|Someone else, 0 [Someone else]}') {
			tmpRoll += myQ;
		};
		let macro="&{template:moves} {{name=@{character_name}}} {{trait=Help or Hinder Someone}} {{roll1=[[" + tmpRoll + "]]}}";
		macro += "{{success=Pick one:\n• [Give them +1 to their roll](`/me : You give them +1 to their roll).\n• [Give them -1 to their roll](`/me : You give them -1 to their roll).\n• [Prevent them from taking a Condition](`/me : Prevent them from taking a Condition).\n• [Offer them 1 Experience to stop what they’re doing.](`/me : Offer them 1 Experience to stop what they’re doing)}}";
		macro += "{{partial=Pick one, but take a condition as a result of your actions:\n• [You give them +1 to their roll](`/me : Give them +1 to their roll).\n• [Give them -1 to their roll](`/me : You give them -1 to their roll).\n• [Prevent them from taking a Condition](`/me : Prevent them from taking a Condition).\n• [Offer them 1 Experience to stop what they’re doing](`/me : Offer them 1 Experience to stop what they’re doing).}}";
		macro += "{{fail=You aren’t able to help or hinder them.}}";
		macro += "{{xp=Mark a point of Experience}}";
		startRoll(macro, (results) => {
			const total = results.results.roll1.result
			const computed = total % 4;
			finishRoll(
				results.rollId,
				{
					roll1: computed,
				}
			);
		});
	});
});
	
on('clicked:knowl', (info) => {
	getAttrs(['Intellect', 'globalMod', 'favSubj'], function(v) {
		let tmpMod = parseInt(v.Intellect)||0;
		let glbl = parseInt(v.globalMod)||0; 
		let fs = parseInt(v.favSubj)||0;
		let tmpRoll = "2d6";
		if (tmpMod<0){
			tmpRoll += "-" + Math.abs(tmpMod) + " [Intellect]"
		};
		if (tmpMod>=0){
			tmpRoll += "+" + Math.abs(tmpMod) + " [Intellect]"
		};
		if (glbl<0){
			tmpRoll += "-" + Math.abs(glbl) + " [Global Mod]"
		};
		if (glbl>0){
			tmpRoll += "+" + Math.abs(glbl) + "[Global Mod]"
		};
		if (fs==1) {tmpRoll += "+" + Math.abs(fs) + " [Fav.Subj.]";};
		let macro="&{template:moves} {{name=@{character_name}}} {{trait=Gain Knowledge}} {{roll1=[[" + tmpRoll + "]]}}";
		macro += "{{success=You gain the knowledge you wanted. You may ask the Narrator a question and they must give a true answer. You might ask:\n• What here isn’t what it seems to be?"
		macro += "\n• Where is the thing I’m looking for?\n• What’s the history of this?\n• How do I make this useful?\n• Are they telling the truth?\n• What do they really want?\n• What do I remember about this?}}";
		macro += "{{partial=You get some of the knowledge you wanted. You may ask the Narrator a question. They must give you a true answer, but they don’t have to give you a full answer.}}";
		macro += "{{fail=You’re not sure if you got the knowledge you wanted. You may ask the Narrator a question, but they don’t have to give you a full answer, or a true one.}}";
		macro += "{{xp=Mark a point of Experience}}";
		startRoll(macro, (results) => {
			const total = results.results.roll1.result
			const computed = total % 4;
			finishRoll(
				results.rollId,
				{
					roll1: computed,
				}
			);
		});
	});
});	

on('clicked:getstuff', (info) => {
	getAttrs(['Bravery', 'Cunning', 'globalMod', 'favSubj'], function(v) {
		let bra = parseInt(v.Bravery)||0;
		let cun = parseInt(v.Cunning)||0;
		let glbl = parseInt(v.globalMod)||0; let fs = parseInt(v.favSubj)||0;
		let tmpRoll = "2d6";
		let myQ = "+?{Select governing Trait";
			myQ = myQ.concat("|Bravery, " + bra + " [Bravery] ");
			myQ = myQ.concat("|Cunning," + cun + " [Cunning]} ");
			tmpRoll += myQ
		if (glbl<0){
			tmpRoll += "-" + Math.abs(glbl) + "[Global Mod]"
		};
		if (glbl>0){
			tmpRoll += "+" + Math.abs(glbl) + "[Global Mod]"
		};
		if (fs==1) {tmpRoll += "+" + Math.abs(fs) + " [Fav.Subj.]";};
		let macro="&{template:moves} {{name=@{character_name}}} {{trait=Get what you Seek}} {{roll1=[[" + tmpRoll + "]]}}";
		macro += "{{success=You get what you wanted, no problem.}}";
		macro += "{{partial=you get what you wanted, but (pick one):\n• [The person you got it from is suspicious](`/me : The person you got it from is suspicious).\n• [You must give or promise something in return](`/me : You must give or promise something in return).\n• [The person you got it from changes their attitude towards you](`/me : The person you got it from changes their attitude towards you).}}";
		macro += "{{fail=You don’t get what you wanted.}}";
		macro += "{{xp=Mark a point of Experience}}";
		startRoll(macro, (results) => {
			const total = results.results.roll1.result
			const computed = total % 4;
			finishRoll(
				results.rollId,
				{
					roll1: computed,
				}
			);
		});
	});
});	

on('clicked:cast', (info) => {
	getAttrs(['Magic', 'globalMod', 'favSubj'], function(v) {
		let tmpMod = parseInt(v.Magic)||0;
		let glbl = parseInt(v.globalMod)||0;
		let fs = parseInt(v.favSubj)||0; 
		let tmpRoll = "2d6";
		if (tmpMod<0){
			tmpRoll += "-" + Math.abs(tmpMod) + " [Magic]"
		};
		if (tmpMod>=0){
			tmpRoll += "+" + Math.abs(tmpMod) + " [Magic]"
		};
		if (glbl<0){
			tmpRoll += "-" + Math.abs(glbl) + " [Global Mod]"
		};
		if (glbl>0){
			tmpRoll += "+" + Math.abs(glbl) + " [Global Mod]"
		};
		if (fs==1) {tmpRoll += "+" + Math.abs(fs) + " [Fav.Subj.]";};
		let macro="&{template:moves} {{name=@{character_name}}} {{trait=Cast a Spell}} {{roll1=[[" + tmpRoll + "]]}}";
		macro += "{{success=You successfully cast the spell the way you wanted.}}";
		macro += "{{partial=Pick one:\n• [The effect isn’t as powerful as it should be](`/me : The effect isn’t as powerful as it should be).\n• [The effect doesn’t last as long as it should](`/me : The effect doesn’t last as long as it should).\n• [You attract unwanted attention](`/me : You attract unwanted attention).}}";
		macro += "{{fail=You fail to cast the spell.}}";
		macro += "{{xp=Mark a point of Experience}}";
		startRoll(macro, (results) => {
			const total = results.results.roll1.result
			const computed = total % 4;
			finishRoll(
				results.rollId,
				{
					roll1: computed,
				}
			);
		});
	});
});

on('clicked:useObj', (info) => {
	getAttrs(['Magic', 'globalMod', 'favSubj'], function(v) {
		let tmpMod = parseInt(v.Magic)||0;
		let glbl = parseInt(v.globalMod)||0; 
		let fs = parseInt(v.favSubj)||0;
		let tmpRoll = "2d6";
		if (tmpMod<0){
			tmpRoll += "-" + Math.abs(tmpMod) + " [Magic]"
		};
		if (tmpMod>=0){
			tmpRoll += "+" + Math.abs(tmpMod) + " [Magic]"
		};
		if (glbl<0){
			tmpRoll += "-" + Math.abs(glbl) + " [Global Mod]"
		};
		if (glbl>0){
			tmpRoll += "+" + Math.abs(glbl) + " [Global Mod]"
		};
		if (fs==1) {tmpRoll += "+" + Math.abs(fs) + " [Fav.Subj.]";};
		let macro="&{template:moves} {{name=@{character_name}}} {{trait=Use a Magical Object}} {{roll1=[[" + tmpRoll + "]]}}";
		macro += "{{success=The object works exactly as expected and you make full use of it.}}";
		macro += "{{partial=Pick one:\n• [The object does something unexpected but helpful](`/me : The object does something unexpected but helpful).\n• [The object’s effect isn’t as powerful as it should be](`/me : The object’s effect isn’t as powerful as it should be).\n• [The object works as expected, but you take a Condition from using it](`/me : The object works as expected, but you take a Condition from using it).\n• [The object works, but it breaks in the process](`/me : The object works, but it breaks in the process).}}";
		macro += "{{fail=The magical object doesn’t work correctly.}}";
		macro += "{{xp=Mark a point of Experience}}";
		startRoll(macro, (results) => {
			const total = results.results.roll1.result
			const computed = total % 4;
			finishRoll(
				results.rollId,
				{
					roll1: computed,
				}
			);
		});
	});
});

on('change:house', function() { 
	getAttrs(['house'], function(v) {
		let hse = v.house||"";
		let crst = 0;
		switch (hse) {
			case "Gryffindor":
				crst=1;
			break;
			case "Hufflepuff":
				crst=2;
			break;
			case "Ravenclaw":
				crst=3;
			break;
			case "Slytherin":
				crst=4;
			break;
			default:
				crst=0;
			break;
		};
		setAttrs({
			crest: crst
		});
	});
});	

on('change:hexed', function() { 
	getAttrs(['hexed'], function(v) {
		let hexd = v.hexed||0;
		if (hexd==0) {
			setAttrs({
				hexed_max: ""
			});
		};
	});
});	

on('change:fav', function() { 
	getAttrs(['fav'], function(v) {
		let fs = v.fav||0;
		if (fs==0) {
			setAttrs({
				fav_max: ""
			});
		};
	});
});	


on('clicked:duel', (info) => {
	getAttrs(['Magic', 'globalMod', 'favSubj'], function(v) {
		let tmpMod = parseInt(v.Magic)||0;
		let glbl = parseInt(v.globalMod)||0; 
		let fs = parseInt(v.favSubj)||0;
		let tmpRoll = "2d6";
		if (tmpMod<0){
			tmpRoll += "-" + Math.abs(tmpMod) + " [Magic]"
		};
		if (tmpMod>=0){
			tmpRoll += "+" + Math.abs(tmpMod) + " [Magic]"
		};
		if (glbl<0){
			tmpRoll += "-" + Math.abs(glbl) + " [Global Mod]"
		};
		if (glbl>0){
			tmpRoll += "+" + Math.abs(glbl) + " [Global Mod]"
		};
		//if (fs==1) {tmpRoll += "+" + Math.abs(fs) + " [Fav.Subj.]";};
		let macro="&{template:moves} {{name=@{character_name}}} {{trait=Duel}} {{roll1=[[" + tmpRoll + "]]}}";
		macro += "{{success=Your spell hits the other witch/wizard, and their spell misses.}}";
		macro += "{{partial=Pick one:\n• [Your spells collide in midair!](`/me : Your spells collide in midair!)\n• [Your spell misses, but so does theirs!](`/me : Your spell misses, but so does theirs!)\n• [Both spells hit](`/me : Both spells hit).}}";
		macro += "{{fail=Your spell misses, and their spell hits!}}";
		macro += "{{xp=Mark a point of Experience}}";
		startRoll(macro, (results) => {
			const total = results.results.roll1.result
			const computed = total % 4;
			finishRoll(
				results.rollId,
				{
					roll1: computed,
				}
			);
		});
	});
});

on('clicked:concoct', (info) => {getAttrs(['Magic', 'globalMod', 'favSubj'], function(v) {
		let tmpMod = parseInt(v.Magic)||0;
		let glbl = parseInt(v.globalMod)||0; 
		let fs = parseInt(v.favSubj)||0;
		let tmpRoll = "2d6";
		if (tmpMod<0){
			tmpRoll += "-" + Math.abs(tmpMod) + " [Magic]"
		};
		if (tmpMod>=0){
			tmpRoll += "+" + Math.abs(tmpMod) + " [Magic]"
		};
		if (glbl<0){
			tmpRoll += "-" + Math.abs(glbl) + " [Global Mod]"
		};
		if (glbl>0){
			tmpRoll += "+" + Math.abs(glbl) + " [Global Mod]"
		};
		if (fs==1) {tmpRoll += "+" + Math.abs(fs) + " [Fav.Subj.]";};
		let macro="&{template:moves} {{name=@{character_name}}} {{trait=Concoct a Potion}} {{roll1=[[" + tmpRoll + "]]}}";
		macro += "{{success=You correctly create the potion you wanted.}}";
		macro += "{{partial=Pick one:\n• [It has some unintended side effect](`/me : It has some unintended side effect).\n• [The process goes wonky and you take a Condition](`/me : The process goes wonky and you take a Condition).\n• [You accidentally make a different potion](`/me : You accidentally make a different potion) (the Narrator tells you which one).}}";
		macro += "{{fail=You don’t create the potion successfully.}}";
		macro += "{{xp=Mark a point of Experience}}";
		startRoll(macro, (results) => {
			const total = results.results.roll1.result
			const computed = total % 4;
			finishRoll(
				results.rollId,
				{
					roll1: computed,
				}
			);
		});
	});
});

on('clicked:approach', (info) => {getAttrs(['Loyalty', 'globalMod', 'favSubj'], function(v) {
		let tmpMod = parseInt(v.Magic)||0;
		let glbl = parseInt(v.globalMod)||0; 
		let fs = parseInt(v.favSubj)||0;
		let tmpRoll = "2d6";
		if (tmpMod<0){
			tmpRoll += "-" + Math.abs(tmpMod) + " [Loyalty]"
		};
		if (tmpMod>=0){
			tmpRoll += "+" + Math.abs(tmpMod) + " [Loyalty]"
		};
		if (glbl<0){
			tmpRoll += "-" + Math.abs(glbl) + " [Global Mod]"
		};
		if (glbl>0){
			tmpRoll += "+" + Math.abs(glbl) + " [Global Mod]"
		};
		if (fs==1) {tmpRoll += "+" + Math.abs(fs) + " [Fav.Subj.]";};
		let macro="&{template:moves} {{name=@{character_name}}} {{trait=Approach a Magical Creature}} {{roll1=[[" + tmpRoll + "]]}}";
		macro += "{{success=The creature acts as you want.}}";
		macro += "{{partial=Pick one:\n• [The creature acts as you want, but you take a Condition for your efforts](`/me : The creature acts as you want, but you take a Condition for your efforts).\n• [The creature acts as you want, but it attracts unwanted attention](`/me : The creature acts as you want, but it attracts unwanted attention).\n• [The creature doesn't act as you want, but it does something else helpful](`/me : The creature doesn't act as you want, but it does something else helpful).}}";
		macro += "{{fail=The creature goes wild.}}";
		macro += "{{xp=Mark a point of Experience}}";
		startRoll(macro, (results) => {
			const total = results.results.roll1.result
			const computed = total % 4;
			finishRoll(
				results.rollId,
				{
					roll1: computed,
				}
			);
		});
	});
});


on('clicked:playQ', (info) => {
	getAttrs(['Bravery', 'Cunning', 'Intellect', 'Loyalty','Bravery', 'globalMod', 'favSubj'], function(v) {
		let bra = parseInt(v.Bravery)||0;
		let cun = parseInt(v.Cunning)||0;
		let intl = parseInt(v.Intellect)||0;
		let loy = parseInt(v.Loyalty)||0;
		let glbl = parseInt(v.globalMod)||0; 
		let fs = parseInt(v.favSubj)||0;
		let tmpRoll = "2d6";
		let myQ = "+?{Select governing Trait";
			myQ = myQ.concat("|+Bravery if your team is playing boldly, " + bra + " [Bravery] ");
			myQ = myQ.concat("|+Cunning if your team is playing dirty," + cun + " [Cunning] ");
			myQ = myQ.concat("|+Intellect if your team is playing tactically, " + intl + " [Intellect] ");
			myQ = myQ.concat("|+Loyalty if your team is playing with great teamwork," + loy + " [Loyalty]} ");
	
		tmpRoll += myQ
		if (glbl<0){
			tmpRoll += "-" + Math.abs(glbl) + "[Global Mod]"
		};
		if (glbl>0){
			tmpRoll += "+" + Math.abs(glbl) + "[Global Mod]"
		};
		if (fs==1) {tmpRoll += "+" + Math.abs(fs) + " [Fav.Subj.]";};
		let macro="&{template:moves} {{name=@{character_name}}} {{trait=Play Quidditch}} {{roll1=[[" + tmpRoll + "]]}}";
		macro += "{{success=You keep control of the match and your team scores 10 points!}}";
		macro += "{{partial=neither team scores and you pass control of the match to another player. Your team doesn’t get a goal because (pick one):\n• [Someone on your team misses a throw or a catch!](`/me : Someone on your team misses a throw or a catch!)\n• [Someone on your team is hit by a Bludger!](`/me : Someone on your team is hit by a Bludger!)\n• [Your team’s play doesn’t go as planned!](`/me : Your team’s play doesn’t go as planned!)\n• [The other team pulls a trick play!](`/me : The other team pulls a trick play!)}}";
		macro += "{{fail= Your team doesn’t score. The Narrator describes how the other team scores 10 points. Pass control to another person.}}";
		macro += "{{xp=Mark a point of Experience}}";
		
		startRoll(macro, (results) => {
			const total = results.results.roll1.result
			const computed = total % 4;
			finishRoll(
				results.rollId,
				{
					roll1: computed,
				}
			);
		});
	});
});

on('clicked:catchS', (info) => {
	getAttrs(['Bravery', 'Cunning', 'Intellect', 'Loyalty','Bravery', 'globalMod', 'favSubj'], function(v) {
		let bra = parseInt(v.Bravery)||0;
		let cun = parseInt(v.Cunning)||0;
		let intl = parseInt(v.Intellect)||0;
		let loy = parseInt(v.Loyalty)||0;
		let glbl = parseInt(v.globalMod)||0; 
		let fs = parseInt(v.favSubj)||0;
		let tmpRoll = "2d6";
		let myQ = "+?{Select governing Trait";
			myQ = myQ.concat("|+Bravery if your team is playing boldly, " + bra + " [Bravery] ");
			myQ = myQ.concat("|+Cunning if your team is playing dirty," + cun + " [Cunning] ");
			myQ = myQ.concat("|+Intellect if your team is playing tactically, " + intl + " [Intellect] ");
			myQ = myQ.concat("|+Loyalty if your team is playing with great teamwork," + loy + " [Loyalty]} ");
	
		tmpRoll += myQ
		if (glbl<0){
			tmpRoll += "-" + Math.abs(glbl) + "[Global Mod]"
		};
		if (glbl>0){
			tmpRoll += "+" + Math.abs(glbl) + "[Global Mod]"
		};
		if (fs==1) {tmpRoll += "+" + Math.abs(fs) + " [Fav.Subj.]";};
		let macro="&{template:moves} {{name=@{character_name}}} {{trait=Play Quidditch}} {{roll1=[[" + tmpRoll + "]]}}";
		macro += "{{success=You do it! Your team catches the Golden Snitch and ends the match, giving your team 150 points.}}";
		macro += "{{partial=Your team isn’t able to catch the Golden Snitch, but neither is the other team. Pass control of the match to another person.}}";
		macro += "{{fail=Your team fails to catch the Golden Snitch, and the other team gets it for 150 points.}}";
		macro += "{{xp=Mark a point of Experience}}";
		
		startRoll(macro, (results) => {
			const total = results.results.roll1.result
			const computed = total % 4
			finishRoll(
				results.rollId,
				{
					roll1: computed,
				}
			);
		});
	});
});
on('clicked:oocCom', (info) => {
	macro="/ooc &{template:ooc} {{comment=?{Enter Comment} }} {{roll1=[[1d1]]}}";
	startRoll(macro, (results) => {
		finishRoll(
		results.rollId,
		{
		});
	});
});
	
on('clicked:wgmCom', (info) => {
	macro="/w gm &{template:wgm} {{comment=?{Enter Comment} }}";
	startRoll(macro, (results) => {
		finishRoll(
		results.rollId,
		{
		});
	});
});	

on('clicked:meCom', (info) => {
	macro="/me &{template:me} {{comment=?{Enter Comment} }} {{roll1=[[1d1]]}}";
	startRoll(macro, (results) => {
		finishRoll(
		results.rollId,
		{
		});
	});
});	
	
	
on('clicked:custRoll', (info) => {
	macro="&{template:custRoll} {{name=@{character_name}}} {{comment=?{Enter roll formula} }} {{roll1=[[?{Enter roll formula}]] }} {{reason=?{Reason for roll?}}}";
	startRoll(macro, (results) => {
        const total = results.results.roll1.result
        const computed = total % 4;
        finishRoll(
            results.rollId,
            {
                roll1: computed
            });
	});
});	


['0', '1', '2', '3', '4'].forEach(attr => {
	on(`change:xp${attr}`, function() {
		getAttrs([`xp${attr}`], function(v) {
			let att = v[`xp${attr}`];
			let cb = parseInt(`${attr}`)||0;
			let v1 = 0;
			let v2 = 0;
			let v3 = 0;
			let v4 = 0;
			switch (cb) {
				case 1:
					v1 = 1;
					v2 = 0;
					v3 = 0;
					v4 = 0;
					break;
				case 2:
					v1 = 1;
					v2 = 1;
					v3 = 0;
					v4 = 0;
					break;
				case 3:				
					v1 = 1;
					v2 = 1;
					v3 = 1;
					v4 = 0;
					break;
				case 4:				
					v1 = 1;
					v2 = 1;
					v3 = 1;
					v4 = 1;
					break;
				default:
					v1 = 0;
					v2 = 0;
					v3 = 0;
					v4 = 0;
					break;
			};
				setAttrs({xp1: v1},{silent:true});
				setAttrs({xp2: v2},{silent:true});
				setAttrs({xp3: v3},{silent:true});
				setAttrs({xp4: v4},{silent:true});
		});
	});
});

['0', '1', '2', '3'].forEach(attr => {
	on(`change:lck${attr}`, function() {
		getAttrs([`lck${attr}`], function(v) {
			let att = v[`lck${attr}`];
			let cb = parseInt(`${attr}`)||0;
			let v1 = 0;
			let v2 = 0;
			let v3 = 0;
			switch (cb) {
				case 1:
					v1 = 1;
					v2 = 0;
					v3 = 0;
					break;
				case 2:
					v1 = 1;
					v2 = 1;
					v3 = 0;
					break;
				case 3:				
					v1 = 1;
					v2 = 1;
					v3 = 1;
					break;
				default:
					v1 = 0;
					v2 = 0;
					v3 = 0;
					break;
			};
				setAttrs({lck1: v1},{silent:true});
				setAttrs({lck2: v2},{silent:true});
				setAttrs({lck3: v3},{silent:true});
		});
	});
});

['0', '1', '2', '3'].forEach(attr => {
	on(`change:lck${attr}`, function() {
		getAttrs([`lck${attr}`], function(v) {
			let att = v[`lck${attr}`];
			let cb = parseInt(`${attr}`)||0;
			let v1 = 0;
			let v2 = 0;
			let v3 = 0;
console.log({att, cb});			
			switch (cb) {
				case 1:
					v1 = 1;
					v2 = 0;
					v3 = 0;
					break;
				case 2:
					v1 = 1;
					v2 = 1;
					v3 = 0;
					break;
				case 3:				
					v1 = 1;
					v2 = 1;
					v3 = 1;
					break;
				default:
					v1 = 0;
					v2 = 0;
					v3 = 0;
					break;
			};
				setAttrs({lck1: v1},{silent:true});
				setAttrs({lck2: v2},{silent:true});
				setAttrs({lck3: v3},{silent:true});
		});
	});
});

</script>

<!-- Data Lists -->
<datalist id="complexion">
    <option value="Dark">Dark</option>
    <option value="Freckled">Freckled</option>
    <option value="Olive">Olive</option>
    <option value="Pale">Pale</option>
    <option value="Ruddy">Ruddy</option>
    <option value="Tan">Tan</option>
</datalist>
<datalist id="hair">
    <option value="Black">Black</option>
    <option value="Blonde">Blonde</option>
    <option value="Brown">Brown</option>
    <option value="Covered">Covered</option>
    <option value="Dyed">Dyed</option>
    <option value="Red">Red</option>
</datalist>
<datalist id="frame">
    <option value="Athletic">Athletic</option>
    <option value="Big">Big</option>
    <option value="Short">Short</option>
    <option value="Stout">Stout</option>
    <option value="Tall">Tall</option>
    <option value="Thin">Thin</option>
</datalist>
<datalist id="ambition">
    <option value="Achievement">Achievement</option>
    <option value="Knowledge">Knowledge</option>
    <option value="Fun">Fun</option>
    <option value="Friendship">Friendship</option>
    <option value="Power">Power</option>
    <option value="Status">Status</option>
</datalist>
<datalist id="wandLook">
    <option value="Flexible">Flexible</option>
    <option value="Long">Long</option>
    <option value="Ornate">Ornate</option>
    <option value="Plain">Plain</option>
    <option value="Second-hand">Second-hand</option>
    <option value="Short">Short</option>
</datalist>
<datalist id="wandWood">
    <option value="Maple">Maple</option>
    <option value="Walnut">Walnut</option>
    <option value="Spruce">Spruce</option>
    <option value="Cedar">Cedar</option>
    <option value="Yew">Yew</option>
    <option value="Elm">Elm</option>
</datalist>
<datalist id="wandCore">
    <option value="Dragon">Dragon</option>
    <option value="Phoenix">Phoenix</option>
    <option value="Unicorn">Unicorn</option>
</datalist>
<datalist id="heritage">
    <option value="Muggle-born">Muggle-born: 1 spell and 3 experience</option>
    <option value="Half-blood">Half-blood: 2 spells and 2 experience</option>
    <option value="Pure-blood">Pure-blood: 3 spells and 1 experience</option>
</datalist>
<datalist id="pet">
    <option value="Owl">Owl: Can send and recieve mail</option>
    <option value="Rat">Rat: Cannot send and recieve mail</option>
    <option value="Cat">Cat: Will not send and recieve mail</option>
    <option value="Toad">Toad: Cannot send and recieve mail</option>
</datalist>
<datalist id="year">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6"6></option>
    <option value="7">7</option>
    <option value="Graduate">Graduate</option>
</datalist>
<datalist id="house">
    <option value="Gryffindor">Gryffindor: +1 to Bravery</option>
    <option value="Hufflepuff">Hufflepuff: +1 to Loyalty</option>
    <option value="Ravenclaw">Ravenclaw: +1 to Intellect</option>
    <option value="Slytherin">Slytherin: +1 to Cunning</option>
</datalist>
<datalist id="patronus">
    <option value="Aardvark">Aardvark</option>
    <option value="Albatros">Albatros</option>
    <option value="Badger">Badger</option>
    <option value="Bear">Bear</option>
    <option value="Blackbird">Blackbird</option>
    <option value="Boar">Boar</option>
    <option value="Cat">Cat</option>
    <option value="Crow">Crow</option>
    <option value="Deer">Deer</option>
    <option value="Dog">Dog</option>
    <option value="Dragon">Dragon</option>
    <option value="Eagle">Eagle</option>
    <option value="Falcon">Falcon</option>
    <option value="Hawk">Hawk</option>
    <option value="Hedgehog">Hedgehog</option>
    <option value="Heron">Heron</option>
    <option value="Hippogriff">Hippogriff</option>
    <option value="Horse">Horse</option>
    <option value="Hummingbird">Hummingbird</option>
    <option value="Lion">Lion</option>
    <option value="Mouse">Mouse</option>
    <option value="Osprey">Osprey</option>
    <option value="Owl">Owl</option>
    <option value="Pheasant">Pheasant</option>
    <option value="Phoenix">Phoenix</option>
    <option value="Rabbit">Rabbit</option>
    <option value="Rat">Rat</option>
    <option value="Robin">Robin</option>
    <option value="Salmon">Salmon</option>
    <option value="Snake">Snake</option>
    <option value="Sparrow">Sparrow</option>
    <option value="Squirrel">Squirrel</option>
    <option value="Swan">Swan</option>
    <option value="Unicorn">Unicorn</option>
    <option value="Winged Horse">Winged Horse</option>
    <option value="Wolf">Wolf</option>
</datalist>
<datalist id="traits">
    <option value="Bravery">Bravery</option>
    <option value="Cunning">Cunning</option>
    <option value="Intellect">Intellect</option>
    <option value="Loyalty">Loyalty</option>
    <option value="Magic">Magic</option>
</datalist>
<datalist id="traitvalues">
    <option value="+2">+2</option>
    <option value="+1">+1</option>
    <option value="0">+0</option>
    <option value="-1">-1</option>
</datalist>
<datalist id="subjects">
    <option value="Charms">Charms: Core</option>
    <option value="Defence Against the Dark Arts">Defence Against the Dark Arts: Core</option>
    <option value="Herbology">Herbology: Core</option>
    <option value="History of Magic">History of Magic: Core</option>
    <option value="Potions">Potions: Core</option>
    <option value="Transfiguration">Transfiguration: Core</option>
    <option value="Arithmancy">Arithmancy: Elective</option>
    <option value="Astronomy">Astronomy: Elective</option>
    <option value="Care of Magical Creatures">Care of Magical Creatures: Elective</option>
    <option value="Divination">Divination: Elective</option>
    <option value="Muggle Studies">Muggle Studies: Elective</option>
    <option value="Quidditch">Quidditch: Elective</option>
</datalist>
<datalist id="magicObjects">
<option value="Auto-Answer Quill">Auto-Answer Quill</option>
<option value="Bezor">Bezor</option>
<option value="Broomstick">Broomstick</option>
<option value="Collapsible Cauldron">Collapsible Cauldron</option>
<option value="Deluminator">Deluminator</option>
<option value="Enchanted map">Enchanted map</option>
<option value="Everlasting Candle">Everlasting Candle</option>
<option value="Exploding Snap Deck">Exploding Snap Deck</option>
<option value="Fireproof Clothing">Fireproof Clothing</option>
<option value="Foe-Glass">Foe-Glass</option>
<option value="Hiccough Sweet">Hiccough Sweet</option>
<option value="Invisibility Cloak">Invisibility Cloak</option>
<option value="Magic Tent">Magic Tent</option>
<option value="Omnioculars">Omnioculars</option>
<option value="Quick-Quotes Quill">Quick-Quotes Quill</option>
<option value="Remembrall">Remembrall</option>
<option value="Self-Stirring Cauldron">Self-Stirring Cauldron</option>
<option value="Sticky Trainers">Sticky Trainers</option>
<option value="Stink Pellets">Stink Pellets</option>
<option value="Time-Turner">Time-Turner</option>
<option value="Trick Wand">Trick Wand</option>
<option value="Two-Way Mirrow">Two-Way Mirrow</option>
<option value="Wizards Chess Set">Wizards Chess Set</option>
</datalist>
<datalist id="positions">
    <option value="Beater">Beater</option>
    <option value="Chaser">Chaser</option>
    <option value="Keeper">Keeper</option>
    <option value="Seeker">Seeker</option>
    <option value="Announcer">Announcer</option>
    <option value="Fan">Fan</option>
</datalist>